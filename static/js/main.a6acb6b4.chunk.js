(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{118:function(e,t,n){e.exports={burgerItems:"BurgerIngredients_burgerItems__13KGK"}},120:function(e,t,n){e.exports={burgerIngredientSection:"BurgerIngredientSection_burgerIngredientSection__ZWA2x"}},121:function(e,t,n){e.exports={icon:"loader_icon__3dSKh"}},122:function(e,t,n){e.exports={modalOverlay:"modalOverlay_modalOverlay__3LiiJ"}},123:function(e,t,n){e.exports={lk_form:"ProfileForm_lk_form__2x83w"}},13:function(e,t,n){e.exports={profileForm:"styles_profileForm__gAMjh",profile_form__title:"styles_profile_form__title__sibGH",profile_form__group:"styles_profile_form__group__3Jpcx",color_text:"styles_color_text__3tQm5"}},135:function(e,t,n){},14:function(e,t,n){e.exports={modal:"modal_modal__3OAHy",modalContentIngredient:"modal_modalContentIngredient__3OQOQ",modalContentMargin:"modal_modalContentMargin__3v8KZ",modalCloseButton:"modal_modalCloseButton__3QKmY",modalContentWrap:"modal_modalContentWrap__3iXA-",modalContentTitle:"modal_modalContentTitle__wLntF",modalContentItems:"modal_modalContentItems__2mY9Q",modalContentItem:"modal_modalContentItem__2cAQy",value:"modal_value__2a51u",modalContentBottom:"modal_modalContentBottom__27QeI",modalFeed:"modal_modalFeed__YWExd",modalHeader:"modal_modalHeader__2-cnq",status:"modal_status__3kXP7",done:"modal_done__Qgt95",ingredientListItem:"modal_ingredientListItem__3FhF2",feedItemIngredient:"modal_feedItemIngredient__2NZwU",ingredientListItemCost:"modal_ingredientListItemCost__3PPXl",ingredients_list:"modal_ingredients_list__2pdwv",ingredients_footer:"modal_ingredients_footer__3s244",ingredient_cost:"modal_ingredient_cost__3_0XX"}},22:function(e,t,n){e.exports={feedTotal:"style_feedTotal__Lbh5E",feedTotalTop:"style_feedTotalTop__2GrBK",feedTotalItem:"style_feedTotalItem__1DvVS",feedTotalTopLeft:"style_feedTotalTopLeft__uBNz9",feedTotalTopRight:"style_feedTotalTopRight__3MdRH",feedTotalItemW:"style_feedTotalItemW__1bQVh",title:"style_title__2R6Dj"}},220:function(e,t,n){"use strict";n.r(t);var r,a=n(1),c=n.n(a),s=n(48),i=n.n(s),o=n(50),d=n(41),u=n(116),l=n(2);!function(e){e.INGREDIENTS_FETCH="INGREDIENTS_FETCH",e.INGREDIENTS_ERROR="INGREDIENTS_ERROR",e.INGREDIENTS_SELECTED="INGREDIENTS_SELECTED",e.CLEAR_INGREDIENTS_SELECTEDS="CLEAR_INGREDIENTS_SELECTEDS"}(r||(r={}));var j,m={ingredients:[],ingredientSelect:{},error:!1},b=function(e){return e.forEach((function(e){return e.__v=0})),e};!function(e){e.OPENMODAL="OPENMODAL",e.CLOSEMODAL="CLOSEMODAL"}(j||(j={}));var p={modalMode:"",modalIsOpen:!1};var O,_=n(40);!function(e){e.SET_BUN="SET_BUN",e.SET_INGREDIENT="SET_INGREDIENT",e.SET_PRICE="SET_PRICE",e.SORT_INGREDIENT="SORT_INGREDIENT",e.REMOVE_INGREDIENT="REMOVE_INGREDIENT",e.REMOVE_BUN="REMOVE_BUN",e.CLEAR_CONSTRUCTOR="CLEAR_CONSTRUCTOR"}(O||(O={}));var f,x=function(e,t,n){var r=e.splice(t,1)[0];return e.splice(n,0,r),e},h={burderConstructor:{bun:[],ingredients:[]},totalPrice:0};!function(e){e.SET_ORDER="SET_ORDER",e.SET_LOADER="SET_LOADER"}(f||(f={}));var v,g={orderNumber:0,loader:!1};!function(e){e.SET_USER="SET_USER",e.SET_USERAUTH="SET_USERAUTH",e.SET_FORGOT_PASSWORD="SET_FORGOT_PASSWORD"}(v||(v={}));var N,E={user:null,isForgotPasswordRequest:!1,isAuth:!1};!function(e){e.WS_CONNECTION_SUCCESS="WS_CONNECTION_SUCCESS",e.WS_CONNECTION_ERROR="WS_CONNECTION_ERROR",e.WS_CONNECTION_CLOSED="WS_CONNECTION_CLOSED",e.WS_GET_MESSAGE="WS_GET_MESSAGE",e.WS_SEND_MESSAGE="WS_SEND_MESSAGE",e.WS_CONNECTION_START="WS_CONNECTION_START",e.WS_CONNECTION_STOP="WS_CONNECTION_STOP"}(N||(N={}));var C={orders:[],ordersUser:[],total:0,totalToday:0,totalUser:0,totalTodayUser:0,loader:!1,wsConnected:!1,wsConnectionFailed:!1,wsConnectedUser:!1,wsConnectionFailedUser:!1};var S,y=Object(d.c)({ingredientsState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.INGREDIENTS_FETCH:return Object(l.a)(Object(l.a)({},e),{},{ingredients:t.payload||[]});case r.INGREDIENTS_ERROR:return Object(l.a)(Object(l.a)({},e),{},{error:t.payload});case r.INGREDIENTS_SELECTED:return Object(l.a)(Object(l.a)({},e),{},{ingredientSelect:t.payload});case r.CLEAR_INGREDIENTS_SELECTEDS:return Object(l.a)(Object(l.a)({},e),{},{ingredients:b(e.ingredients)});default:return e}},burgerState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.SET_BUN:return Object(l.a)(Object(l.a)({},e),{},{burderConstructor:Object(l.a)(Object(l.a)({},e.burderConstructor),{},{bun:[].concat(Object(_.a)(e.burderConstructor.bun),[t.payload])})});case O.SET_INGREDIENT:return Object(l.a)(Object(l.a)({},e),{},{burderConstructor:Object(l.a)(Object(l.a)({},e.burderConstructor),{},{ingredients:[].concat(Object(_.a)(e.burderConstructor.ingredients),[t.payload])})});case O.SORT_INGREDIENT:var n=t.payload,r=n.index,a=n.atIndex;return Object(l.a)(Object(l.a)({},e),{},{burderConstructor:Object(l.a)(Object(l.a)({},e.burderConstructor),{},{ingredients:x(Object(_.a)(e.burderConstructor.ingredients),r,a)})});case O.SET_PRICE:return Object(l.a)(Object(l.a)({},e),{},{totalPrice:t.payload});case O.CLEAR_CONSTRUCTOR:return Object(l.a)(Object(l.a)({},e),{},{burderConstructor:{bun:[],ingredients:[]}});case O.REMOVE_BUN:return Object(l.a)(Object(l.a)({},e),{},{burderConstructor:Object(l.a)(Object(l.a)({},e.burderConstructor),{},{bun:[]})});case O.REMOVE_INGREDIENT:return Object(l.a)(Object(l.a)({},e),{},{burderConstructor:Object(l.a)(Object(l.a)({},e.burderConstructor),{},{ingredients:e.burderConstructor.ingredients.filter((function(e,n){return n!==t.payload}))})});default:return e}},modalState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.OPENMODAL:return Object(l.a)(Object(l.a)({},e),{},{modalIsOpen:t.payload.modalIsOpen,modalMode:t.payload.mode});case j.CLOSEMODAL:return Object(l.a)(Object(l.a)({},e),{},{modalIsOpen:!1});default:return e}},orderState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.SET_ORDER:return Object(l.a)(Object(l.a)({},e),{},{orderNumber:t.payload});case f.SET_LOADER:return Object(l.a)(Object(l.a)({},e),{},{loader:t.payload});default:return e}},userState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.SET_USER:return Object(l.a)(Object(l.a)({},e),{},{user:t.payload});case v.SET_USERAUTH:return Object(l.a)(Object(l.a)({},e),{},{isAuth:!0});case v.SET_FORGOT_PASSWORD:return Object(l.a)(Object(l.a)({},e),{},{isForgotPasswordRequest:!0});default:return e}},feedState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.WS_CONNECTION_START:return Object(l.a)({},e);case N.WS_CONNECTION_SUCCESS:return Object(l.a)(Object(l.a)({},e),{},{wsConnected:!0,wsConnectionFailed:!1});case N.WS_GET_MESSAGE:return Object(l.a)(Object(l.a)({},e),{},{orders:t.payload.orders,total:t.payload.total,totalToday:t.payload.totalToday});case N.WS_CONNECTION_CLOSED:case N.WS_CONNECTION_STOP:return Object(l.a)(Object(l.a)({},e),{},{wsConnected:!1,wsConnectionFailed:!1});default:return e}}}),T={WS_CONNECTION_SUCCESS:N.WS_CONNECTION_SUCCESS,WS_CONNECTION_ERROR:N.WS_CONNECTION_ERROR,WS_CONNECTION_CLOSED:N.WS_CONNECTION_CLOSED,WS_GET_MESSAGE:N.WS_GET_MESSAGE,WS_SEND_MESSAGE:N.WS_SEND_MESSAGE,WS_CONNECTION_START:N.WS_CONNECTION_START,WS_CONNECTION_STOP:N.WS_CONNECTION_STOP},I=Object(d.d)(y,Object(d.a)(u.a,(S=T,function(e){var t=null;return function(n){return function(r){var a=e.dispatch,c=r.type,s=r.payload;c===S.WS_CONNECTION_START&&(t=new WebSocket(s)),c===S.WS_CONNECTION_STOP&&null!==t&&t.close(1e3,"Page closed by user"),t&&(t.onopen=function(e){a({type:S.WS_CONNECTION_SUCCESS,payload:e})},t.onerror=function(e){a({type:S.WS_CONNECTION_ERROR,payload:e})},t.onmessage=function(e){var n=e.data;null!==n&&void 0!==n&&n.includes("ping")&&null!==t&&t.send("pong");var r=JSON.parse(n),c=r.success,s=r.orders,i=r.total,o=r.totalToday;c&&a({type:S.WS_GET_MESSAGE,payload:{orders:s,total:i,totalToday:o}})},t.onclose=function(e){a({type:S.WS_CONNECTION_CLOSED,payload:e})},c===S.WS_SEND_MESSAGE&&t.send(JSON.stringify(s))),n(r)}}}))),R=function(){return Object(o.b)()},w=(n(135),n(15)),k=n(5),D=n.n(k),A=n(20),L=n(11),W=n.n(L),M="https://norma.nomoreparties.space/api",B=function(){var e=Object(w.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(M).concat(t),e.next=3,fetch(n).then(H);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(w.a)(D.a.mark((function e(t,n){var r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(M).concat(t),a={Accept:"application/json","Content-Type":"application/json"},W.a.get("accessToken")&&Object.assign(a,{authorization:W.a.get("accessToken")}),e.next=5,fetch(r,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:a,body:JSON.stringify({ingredients:n})}).then(H);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),U=function(){var e=Object(w.a)(D.a.mark((function e(t,n,r){var a,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(M).concat(t),c={Accept:"application/json","Content-Type":"application/json"},""!==r&&Object.assign(c,{authorization:r}),e.next=5,fetch(a,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:c,body:JSON.stringify(n)}).then(H);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),P=function(){var e=Object(w.a)(D.a.mark((function e(t){var n,r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(M).concat(t),r=W.a.get("accessToken")||null,a={Accept:"application/json","Content-Type":"application/json"},""!==r&&Object.assign(a,{authorization:r}),e.next=6,fetch(n,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:a}).then(z);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(w.a)(D.a.mark((function e(t,n){var r,a,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(M).concat(t),a=W.a.get("accessToken"),c={Accept:"application/json","Content-Type":"application/json"},""!==a&&Object.assign(c,{authorization:a}),e.next=6,fetch(r,{method:"PATCH",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:c,body:JSON.stringify(n)}).then(H);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),H=function(e){return e.ok?e.json():Promise.reject(e.status)},z=function(e){return e.ok?e.json():Promise.reject(e.text().then((function(e){return JSON.parse(e)})))},V={getOrder:function(e){return function(t){G("/orders",e).then((function(e){var n=e.success,a=e.order;n&&a&&(t({type:f.SET_ORDER,payload:null===a||void 0===a?void 0:a.number}),t({type:j.OPENMODAL,payload:{modalIsOpen:!0,mode:"orderDetails"}}),t({type:O.CLEAR_CONSTRUCTOR}),t({type:r.CLEAR_INGREDIENTS_SELECTEDS}))})).catch((function(e){console.error("\u041d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c \u043e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437")})).finally((function(){t({type:f.SET_LOADER,payload:!1})}))}},setIsLoader:function(e){return{type:f.SET_LOADER,payload:e}}},J=n(233),Q={setBun:function(e){var t=Object(J.a)(),n=Object(l.a)({},e),r=Object.assign(n,{uuid:t});return{type:O.SET_BUN,payload:r}},setIngredient:function(e){var t=Object(J.a)(),n=Object(l.a)({},e),r=Object.assign(n,{uuid:t});return{type:O.SET_INGREDIENT,payload:r}},setPrice:function(e){return{type:O.SET_PRICE,payload:e}},sortIngredientActions:function(e){return{type:O.SORT_INGREDIENT,payload:e}},removeIngredient:function(e){return{type:O.REMOVE_INGREDIENT,payload:e}},removeBun:function(){return{type:O.REMOVE_BUN}}},X={getIngredients:function(){return function(e){B("/ingredients").then((function(t){var n=t.data,a=t.success;e(a&&n?{type:r.INGREDIENTS_FETCH,payload:n||[]}:{type:r.INGREDIENTS_FETCH,payload:[]})})).catch((function(t){e({type:r.INGREDIENTS_ERROR,payload:!0})}))}},setIngredientSelected:function(e){return{type:r.INGREDIENTS_SELECTED,payload:e}}},Z={openModalAction:function(e){return{type:j.OPENMODAL,payload:e}},closeModalAction:function(){return{type:j.CLOSEMODAL}}},K={updateToken:function(){var e=Object(w.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={token:W.a.get("refreshToken")},e.next=3,U("/auth/token",t).then((function(e){if(e.success){var t=new Date((new Date).getTime()+12e5);return W.a.set("accessToken",e.accessToken,{expires:t}),W.a.set("refreshToken",e.refreshToken),!0}return!1}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),logoutUser:function(){var e=Object(w.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={token:W.a.get("refreshToken")},e.next=3,U("/auth/logout",t).then((function(e){return!!e.success&&(W.a.remove("accessToken"),W.a.remove("refreshToken"),!0)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),forgotPassword:function(e){return function(){var t=Object(w.a)(D.a.mark((function t(n){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.abrupt("return",U("/password-reset",e).then((function(e){return!!e.success&&(n({type:v.SET_FORGOT_PASSWORD,payload:!0}),!0)})));case 4:return t.prev=4,t.t0=t.catch(0),t.abrupt("return",!1);case 7:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(e){return t.apply(this,arguments)}}()},resetPassword:function(){var e=Object(w.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("password-reset/reset",t).then((function(e){return e.success?{success:!0}:{success:!1}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),register:function(e){return function(t){return U("/auth/register",e).then((function(e){return!!e.success&&(W.a.set("accessToken",e.accessToken),W.a.set("refreshToken",e.refreshToken),t({type:v.SET_USER,payload:e.user}),!0)}))}},login:function(e){return function(){var t=Object(w.a)(D.a.mark((function t(n){var r,a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U("/auth/login",e);case 2:if(!(r=t.sent).success){t.next=11;break}return a=new Date((new Date).getTime()+12e5),r&&r.accessToken&&r.refreshToken&&(W.a.set("accessToken",r.accessToken,{expires:a}),W.a.set("refreshToken",r.refreshToken)),n({type:v.SET_USER,payload:r.user}),n({type:v.SET_USERAUTH,payload:!0}),t.abrupt("return",!0);case 11:return t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},changeUserData:function(e){return function(){var t=Object(w.a)(D.a.mark((function t(n){var r;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(W.a.get("accessToken")){t.next=4;break}return t.next=3,K.updateToken();case 3:t.sent;case 4:return t.next=6,F("/auth/user",e);case 6:if(!(r=t.sent)||!r.success){t.next=12;break}return n({type:v.SET_USER,payload:r.user}),t.abrupt("return",!0);case 12:return t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getUser:function(){return P("/auth/user").then((function(e){return e})).catch((function(e){return e}))},getUserInformation:function(){return function(){var e=Object(w.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W.a.get("accessToken")){e.next=3;break}return e.next=3,K.updateToken();case 3:return e.next=5,K.getUser();case 5:if(!(n=e.sent)||!n.success){e.next=11;break}return t({type:v.SET_USER,payload:n.user}),e.abrupt("return",n);case 11:return e.abrupt("return",{success:!1});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setUserAuth:function(e){return function(e){e({type:v.SET_USERAUTH,payload:!0})}}},q={wsConnectionSuccess:function(){return{type:N.WS_CONNECTION_SUCCESS}},wsConnectionStart:function(e){return{type:N.WS_CONNECTION_START,payload:e}},wsConnectionError:function(){return{type:N.WS_CONNECTION_ERROR}},wsConnectionClosed:function(){return{type:N.WS_CONNECTION_CLOSED}},wsConnectionGetMessage:function(e){return{type:N.WS_GET_MESSAGE,payload:e}},wsConnectionSengMessage:function(e){return{type:N.WS_SEND_MESSAGE,payload:e}},wsConnectionStop:function(){return{type:N.WS_CONNECTION_STOP}}},Y=Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)({},V),Q),X),Z),K),q),$=function(){var e=R();return Object(a.useMemo)((function(){return Object(d.b)(Y,e)}),[e])},ee=n(21),te=n(6),ne=n(57),re=n.n(ne),ae=n(12),ce=n.n(ae),se=n(90),ie=n.n(se),oe=n(0);var de=function(e){var t=e.title,n=e.Icon,r=e.onClick;return e.isActive,Object(oe.jsxs)("li",{className:ce()(ie.a.headerMenuItem,"pt-4 pb-4 pl-5 pr-5"),onClick:r,children:[Object(oe.jsx)("div",{className:ce()(ie.a.headerMenuItemIcon,"mr-2"),children:n}),Object(oe.jsx)("span",{className:"text text_type_main-default",children:t})]})};var ue=function(){var e=Object(ee.g)(),t=Object(ee.j)("/"),n=Object(ee.j)("/feed"),r=Object(ee.j)("/profile"),a=t&&t.isExact,c=n&&n.isExact,s=r&&r.isExact;return Object(oe.jsx)("header",{className:"".concat(re.a.header," pt-4 pb-4"),children:Object(oe.jsx)("div",{className:"container",children:Object(oe.jsxs)("nav",{className:re.a.headerWrap,children:[Object(oe.jsxs)("ul",{className:re.a.headerMenuList,children:[Object(oe.jsx)(de,{title:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",Icon:Object(oe.jsx)(te.BurgerIcon,{type:"primary"}),onClick:function(){e.push({pathname:"/"})},isActive:a}),Object(oe.jsx)(de,{title:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",Icon:Object(oe.jsx)(te.ListIcon,{type:"primary"}),onClick:function(){e.push({pathname:"/feed"})},isActive:c})]}),Object(oe.jsx)("div",{className:re.a.headerLogo,children:Object(oe.jsx)(te.Logo,{})}),Object(oe.jsx)(de,{title:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442",Icon:Object(oe.jsx)(te.ProfileIcon,{type:"primary"}),onClick:function(){e.push({pathname:"/profile"})},isActive:s})]})})})},le=n(228),je=n(124),me=o.c,be=n(7),pe=n(118),Oe=n.n(pe),_e=n(230),fe=n(67),xe=n.n(fe);function he(e){var t=e.ingredient,n=Object(ee.h)(),r=$(),a=r.setIngredientSelected,c=r.openModalAction,s=Object(_e.a)({type:"ingredient-card",item:{uuid:t._id},collect:function(e){return{opacity:e.isDragging()?.5:1}}}),i=Object(be.a)(s,2),o=i[0].opacity,d=i[1];return Object(oe.jsx)(oe.Fragment,{children:Object(oe.jsx)("div",{className:ce()(xe.a.burgerItem,"mb-8"),onClick:function(){a(t),c({modalIsOpen:!0,mode:"IngredientDetails"})},ref:d,style:{opacity:o},children:Object(oe.jsx)(A.b,{className:xe.a.burgerItemlink,to:{pathname:"/ingredients/".concat(t._id),state:{background:n}},children:Object(oe.jsxs)("div",{className:"pl-4 pr-4",children:[t.__v>0&&Object(oe.jsx)(te.Counter,{count:t.__v,size:"default"}),Object(oe.jsx)("img",{src:t.image,alt:"",className:"mb-1"}),Object(oe.jsxs)("div",{className:ce()(xe.a.burderItemPrice,"mb-1"),children:[Object(oe.jsx)("span",{className:"text text_type_main-medium",children:t.price}),Object(oe.jsx)(te.CurrencyIcon,{type:"primary"})]}),Object(oe.jsx)("div",{className:"burgerTitle text text_type_main-default",children:t.name})]})})})})}var ve=n(120),ge=n.n(ve);var Ne=function(e){var t=e.title,n=e.ingredients,r=e.bunsRef,a=e.saucesRef,c=e.mainsRef;return Object(oe.jsxs)("div",{className:ce()(ge.a.burgerIngredientSection,"mt-10"),ref:"\u0411\u0443\u043b\u043a\u0438"===t?r:"\u0421\u043e\u0443\u0441\u044b"===t?a:c,children:[Object(oe.jsx)("div",{className:"title text text_type_main-medium mb-6",children:t}),n&&n.map((function(e,t){return Object(oe.jsx)(he,{ingredient:e},"".concat(e._id,"_").concat(t))}))]})};var Ee=function(){var e=me((function(e){return e.ingredientsState})).ingredients,t={bun:"\u0411\u0443\u043b\u043a\u0438",sauce:"\u0421\u043e\u0443\u0441\u044b",main:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"},n=Object(a.useRef)(null),r=Object(a.useRef)(null),c=Object(a.useRef)(null),s=Object(a.useRef)(null),i=Object(a.useState)("bun"),o=Object(be.a)(i,2),d=o[0],u=o[1],l=e.sort((function(e,t){return"bun"===e.type&&"bun"!==t.type||"sauce"===e.type&&"sauce"!==t.type?-1:0})),j={};return l.forEach((function(e){var t=e.type;j[t]||(j[t]=[]),j[t].push(e)})),Object(oe.jsxs)("div",{className:"col",children:[Object(oe.jsx)("div",{className:"flex",children:t&&Object.keys(t).map((function(e){return Object(oe.jsx)(te.Tab,{active:d===e,onClick:u,value:e,children:t[e]},e)}))}),Object(oe.jsx)("div",{className:ce()(Oe.a.burgerItems,"customScroll"),ref:n,onScroll:function(){if(n.current&&r.current&&c.current&&s.current){var e=n.current.getBoundingClientRect().top,t=null===r||void 0===r?void 0:r.current.getBoundingClientRect().top,a=null===c||void 0===c?void 0:c.current.getBoundingClientRect().top,i=null===s||void 0===s?void 0:s.current.getBoundingClientRect().top,o=Math.abs(e-t),d=Math.abs(e-a),l=Math.abs(e-i);u(o<d?"bun":d<l?"sauce":"main")}},children:j&&Object.keys(j).map((function(e,n){return Object(oe.jsx)(Ne,{title:t[e],ingredients:j[e],bunsRef:r,saucesRef:c,mainsRef:s},e)}))})]})},Ce=n(231),Se=n(35),ye=n.n(Se),Te=function(e){var t=e.children,n=e.uuid,r=(e.ingredientsIndex,e.findIngredient),a=e.sortIngredient,c=r(n).index,s=Object(_e.a)((function(){return{type:"ingredients-sort",item:{uuid:n,originalIndex:c},collect:function(e){return{isDragging:e.isDragging()}},end:function(e,t){var n=e.uuid,c=e.originalIndex;if(!t.didDrop()){var s=r(n).index;a(s,c)}}}}),[n,c,a]),i=Object(be.a)(s,2),o=i[0].isDragging,d=i[1],u=Object(Ce.a)((function(){return{accept:"ingredients-sort",hover:function(e){var t=e.uuid;if(t!==n){var c=r(n).index,s=r(t).index;a(s,c)}}}}),[r,a]),l=Object(be.a)(u,2)[1],j=o?0:1;return Object(oe.jsx)("div",{ref:function(e){return d(l(e))},className:ye.a.burgerCard,style:{opacity:j},children:t})},Ie=n(121),Re=n.n(Ie);var we=function(){return Object(oe.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 100 100",className:Re.a.icon,children:Object(oe.jsxs)("circle",{cx:"50",cy:"50",r:"37",stroke:"white",strokeWidth:"12",strokeLinecap:"round",fill:"none",strokeDasharray:"40 192",strokeDashoffset:"0",children:[Object(oe.jsx)("animate",{attributeName:"stroke-dasharray",repeatCount:"indefinite",dur:"1.2s",values:"14 218;160 72;14 218",keyTimes:"0;0.5;1"}),Object(oe.jsx)("animate",{attributeName:"stroke-dashoffset",repeatCount:"indefinite",dur:"1.2s",from:"0",to:"-464"})]})})};function ke(e){var t=e.onDropHandler,n=Object(ee.g)(),r=$(),c=r.setPrice,s=r.removeIngredient,i=r.sortIngredientActions,o=r.getOrder,d=r.setIsLoader,u=me((function(e){return e.burgerState})),l=u.burderConstructor,j=u.totalPrice,m=me((function(e){return e.ingredientsState})).ingredients,b=me((function(e){return e.userState})).isAuth,p=me((function(e){return e.orderState})).loader,O=Object(a.useState)(!1),f=Object(be.a)(O,2),x=f[0],h=f[1],v=l.bun,g=l.ingredients,N=null===v||void 0===v?void 0:v[0],E=Object(Ce.a)({accept:"ingredient-card",drop:function(e){t(e)}}),C=Object(be.a)(E,2)[1],S=Object(Ce.a)({accept:"ingredients-sort"}),y=Object(be.a)(S,2)[1];Object(a.useEffect)((function(){var e,t=2*(null===(e=v[0])||void 0===e?void 0:e.price)||0,n=null===g||void 0===g?void 0:g.reduce((function(e,t){return e+t.price}),0);c(t+n),h(!N)}),[v,g,N]);var T=function(e,t){return t?"".concat(e,"top"===t?" (\u0432\u0435\u0440\u0445)":" (\u043d\u0438\u0437)"):e},I=function(){var e=Object(w.a)(D.a.mark((function e(){var t,r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d(!0),b||(n.push("/login"),d(!1)),!b){e.next=8;break}return t=N._id,r=g.map((function(e){return e._id})),a=[t].concat(Object(_.a)(r),[t]),e.next=8,o(a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=Object(a.useCallback)((function(e){var t=g.filter((function(t){return t.uuid===e}))[0];return{findItem:t,index:g.indexOf(t)}}),[g]),k=Object(a.useCallback)((function(e,t){i({index:e,atIndex:t})}),[]);return Object(oe.jsx)(oe.Fragment,{children:Object(oe.jsxs)("div",{className:"col",children:[Object(oe.jsx)("div",{className:ye.a.burgerCards,children:Object(oe.jsxs)("div",{className:ye.a.BurgerConstructorsWrapper,ref:C,children:[N&&Object(oe.jsx)("div",{className:ce()(ye.a.burgerCard,"pr-4"),children:Object(oe.jsx)(te.ConstructorElement,{type:"top",isLocked:!0,text:T(N.name,"top"),price:N.price,thumbnail:N.image})}),Object(oe.jsx)("div",{ref:y,className:ce()(ye.a.burgerWrapper,"customScroll","pr-2"),children:g&&g.map((function(e,t){return Object(oe.jsxs)(Te,{uuid:e.uuid,ingredientsIndex:t,findIngredient:R,sortIngredient:k,children:[Object(oe.jsx)("div",{className:ye.a.burderCardIcon,children:Object(oe.jsx)(te.DragIcon,{type:"primary"})}),Object(oe.jsx)(te.ConstructorElement,{type:e.position,isLocked:e.locker,text:T(e.name,e.position),price:e.price,thumbnail:e.image,handleClose:function(){return function(e,t){var n=m.find((function(t){return t._id===e._id}));n&&n.__v>0&&(n.__v=n.__v-1),s(t)}(e,t)}})]},e.uuid)}))}),N&&Object(oe.jsx)("div",{className:ce()(ye.a.burgerCard,"pr-4"),children:Object(oe.jsx)(te.ConstructorElement,{type:"bottom",isLocked:!0,text:T(N.name,"bottom"),price:N.price,thumbnail:N.image})})]})}),Object(oe.jsxs)("div",{className:ce()(ye.a.burgerTotalPrice,"mt-10 mr-4"),children:[Object(oe.jsxs)("div",{className:ce()(ye.a.price,"text text_type_digits-medium mr-10"),children:[Object(oe.jsx)("span",{children:j}),Object(oe.jsx)(te.CurrencyIcon,{type:"primary"})]}),Object(oe.jsx)("div",{className:ye.a.button_wrapper,children:Object(oe.jsx)(te.Button,{type:"primary",size:"medium",onClick:I,disabled:x,children:p?Object(oe.jsx)(we,{}):"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})})]})]})})}function De(){var e=$(),t=e.setBun,n=e.setIngredient,r=e.removeBun,a=me((function(e){return e.ingredientsState})).ingredients,c=me((function(e){return e.burgerState})).burderConstructor.bun;return Object(oe.jsxs)("div",{className:"container mb-10",children:[Object(oe.jsx)("h1",{className:"text text_type_main-large mt-10 mb-5 title",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(oe.jsxs)("div",{className:"row",children:[Object(oe.jsx)(Ee,{}),Object(oe.jsx)(ke,{onDropHandler:function(e){var s=a.find((function(t){return t._id===e.uuid}));s&&(1===c.length&&"bun"===s.type&&(c[0].__v=0,r()),s.__v=s.__v+1,"bun"===s.type?t(s):n(s))}})]})]})}var Ae=n(122),Le=n.n(Ae);var We=function(){return Object(oe.jsx)("div",{className:Le.a.modalOverlay})},Me=n(14),Be=n.n(Me),Ge=function(e){var t=e.show,n=e.children,r=e.onClose,c=document.getElementById("modals"),s=Object(a.useRef)(null),o=function(e){"Escape"===e.key&&r()},d=function(e){t&&s.current&&!s.current.contains(e.target)&&r()};return Object(a.useEffect)((function(){return document.body.addEventListener("keydown",o),function(){document.body.removeEventListener("keydown",o)}}),[]),Object(a.useEffect)((function(){return document.addEventListener("mousedown",d),document.addEventListener("touchstart",d),function(){document.removeEventListener("mousedown",d),document.removeEventListener("touchstart",d)}}),[t,s]),Object(a.useEffect)((function(){return t&&(document.body.style.overflow="hidden"),function(){document.body.style.overflow="unset"}}),[t]),t?i.a.createPortal(Object(oe.jsxs)("div",{className:"modalTarget",children:[Object(oe.jsx)(We,{}),Object(oe.jsxs)("div",{ref:s,className:ce()(Be.a.modal,"pt-15 pb-15 pr-10 pl-10"),children:[Object(oe.jsx)("button",{type:"button",className:Be.a.modalCloseButton,onClick:r,children:Object(oe.jsx)(te.CloseIcon,{type:"primary"})}),n]})]}),c):null};var Ue=function(){return Object(oe.jsxs)("svg",{width:"107",height:"102",viewBox:"0 0 107 102",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(oe.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.36637 37.3873C2.54454 45.5044 2.54455 56.4957 8.36637 64.6127L28.3336 92.4518C34.1554 100.569 44.4748 103.965 53.8947 100.865L86.2023 90.2313C95.6223 87.1309 102 78.2387 102 68.2055V33.7945C102 23.7612 95.6222 14.8691 86.2023 11.7687L53.8947 1.13508C44.4748 -1.96536 34.1554 1.43114 28.3336 9.54819L8.36637 37.3873Z",fill:"url(#paint0_radial_311_23)",fillOpacity:"0.25"}),Object(oe.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M103.944 39.453C108.019 46.5983 108.019 55.4017 103.944 62.547L88.5996 89.453C84.5247 96.5983 76.994 101 68.8442 101H38.1558C30.006 101 22.4753 96.5983 18.4004 89.453L3.05617 62.547C-1.01872 55.4017 -1.01872 46.5983 3.05617 39.453L18.4004 12.547C22.4753 5.40169 30.006 1 38.1558 1L68.8442 1C76.994 1 84.5247 5.40169 88.5996 12.547L103.944 39.453Z",fill:"url(#paint1_radial_311_23)",fillOpacity:"0.25"}),Object(oe.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M43.9249 20.9109C49.3362 17.0297 56.6638 17.0297 62.0751 20.9109L80.6345 34.2224C86.0459 38.1036 88.3102 44.9832 86.2433 51.2632L79.1542 72.8016C77.0873 79.0815 71.1592 83.3333 64.4703 83.3333H41.5296C34.8408 83.3333 28.9127 79.0815 26.8458 72.8016L19.7567 51.2632C17.6898 44.9832 19.9541 38.1036 25.3655 34.2224L43.9249 20.9109Z",fill:"url(#paint2_radial_311_23)",fillOpacity:"0.25"}),Object(oe.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M73.3122 37.5959C74.1999 38.4172 74.2327 39.7806 73.3852 40.641L50.0519 64.3333C49.6272 64.7646 49.0371 65.0059 48.422 64.9999C47.8069 64.9939 47.222 64.741 46.8063 64.3016L34.5841 51.3785C33.7548 50.5016 33.8159 49.1392 34.7206 48.3354C35.6253 47.5316 37.031 47.5908 37.8604 48.4677L48.4773 59.6934L70.1703 37.6667C71.0177 36.8062 72.4244 36.7745 73.3122 37.5959Z",fill:"#F2F2F3"}),Object(oe.jsxs)("defs",{children:[Object(oe.jsxs)("radialGradient",{id:"paint0_radial_311_23",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(53 51) rotate(-46.1458) scale(70.7248 53.2019)",children:[Object(oe.jsx)("stop",{stopColor:"#801AB3",stopOpacity:"0"}),Object(oe.jsx)("stop",{offset:"1",stopColor:"#4C4CFF"})]}),Object(oe.jsxs)("radialGradient",{id:"paint1_radial_311_23",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(53.5 51) rotate(-43.0632) scale(73.2274 55.0025)",children:[Object(oe.jsx)("stop",{stopColor:"#801AB3",stopOpacity:"0"}),Object(oe.jsx)("stop",{offset:"1",stopColor:"#4C4CFF"})]}),Object(oe.jsxs)("radialGradient",{id:"paint2_radial_311_23",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(53 50.6667) rotate(136.146) scale(47.1499 35.4679)",children:[Object(oe.jsx)("stop",{stopColor:"#801AB3",stopOpacity:"0"}),Object(oe.jsx)("stop",{offset:"1",stopColor:"#4C4CFF",stopOpacity:"0.5"})]})]})]})},Pe=n(68),Fe=n.n(Pe);var He=function(e){var t=e.item;return Object(oe.jsxs)("div",{className:Fe.a.modalContent,children:[Object(oe.jsx)("div",{className:ce()(Fe.a.modalOrderTitle," pt-15 text text_type_digits-large mb-8"),children:t}),Object(oe.jsxs)("div",{className:"modalOrderContent",children:[Object(oe.jsx)("div",{className:"modalOrderContent-indeti text text_type_main-medium mb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(oe.jsx)("div",{className:"modalOrderContentIcon mb-15",children:Object(oe.jsx)(Ue,{})}),Object(oe.jsxs)("div",{className:"modalOrderContentDescription",children:[Object(oe.jsx)("p",{className:"text text_type_main-default mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(oe.jsx)("span",{className:ce()(Fe.a.textDark,"text text_type_main-default"),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})]})]})};var ze=function(){var e=$().closeModalAction,t=me((function(e){return e.ingredientsState})),n=t.error,r=me((function(e){return e.modalState})),a=r.modalIsOpen,c=r.modalMode,s=me((function(e){return e.orderState})),i=s.orderNumber;return Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)("div",{className:"App",children:n?Object(oe.jsx)("div",{className:"error-App",children:Object(oe.jsx)("p",{className:"text text_type_main-large",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445"})}):Object(oe.jsx)(le.a,{backend:je.a,children:Object(oe.jsx)(De,{})})}),Object(oe.jsx)(Ge,{show:a&&"orderDetails"===c,onClose:function(){return e()},children:Object(oe.jsx)(He,{item:i})})]})},Ve=function(e){var t=e.path,n=e.exact,r=e.children,a=W.a.get("accessToken");return Object(oe.jsx)(ee.b,{path:t,exact:n,render:function(e){var t=e.location;return a?r:Object(oe.jsx)(ee.a,{to:{pathname:"/login",state:{from:t}}})}})},Je=n(25),Qe=n(13),Xe=n.n(Qe),Ze=n(3),Ke=n.n(Ze);var qe=function(){var e=Object(ee.g)(),t=Object(ee.h)(),n=$().forgotPassword,r=me((function(e){return e.userState})),c=(r.isAuth,r.isForgotPasswordRequest),s=Object(a.useState)({email:""}),i=Object(be.a)(s,2),o=i[0],d=i[1],u=function(){var r=Object(w.a)(D.a.mark((function r(a){return D.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a.preventDefault(),r.next=3,n(o);case 3:c&&e.push("/reset-password",{from:t});case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return W.a.get("accessToken")?Object(oe.jsx)(ee.a,{to:"/profile"}):Object(oe.jsxs)("div",{className:Xe.a.profileForm,children:[Object(oe.jsx)("div",{className:Ke()(Xe.a.profile_form__title,"mb-6 text text_type_main-medium"),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(oe.jsxs)("form",{onSubmit:u,children:[Object(oe.jsx)("div",{className:Ke()(Xe.a.profile_form__group,"mb-6"),children:Object(oe.jsx)(te.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",name:"email",errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",value:o.email,onChange:function(e){d(Object(l.a)(Object(l.a)({},o),{},Object(Je.a)({},e.target.name,e.target.value)))}})}),Object(oe.jsx)("div",{className:Ke()(Xe.a.profile_form__group,"mb-20"),children:Object(oe.jsx)(te.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})})]}),Object(oe.jsxs)("div",{className:Ke()(Xe.a.profile_form__group,"mb-4"),children:[Object(oe.jsx)("p",{className:Ke()(Xe.a.color_text,"text text_type_main-default"),children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(oe.jsx)(A.b,{to:"/login",className:"color_link",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})};var Ye=function(){return Object(oe.jsx)("div",{className:"container",children:Object(oe.jsx)(qe,{})})};var $e=function(){var e,t,n=Object(ee.g)(),r=$().login,c=Object(a.useState)(!1),s=Object(be.a)(c,2),i=s[0],o=s[1],d=Object(a.useState)({email:"",password:""}),u=Object(be.a)(d,2),j=u[0],m=u[1],b=function(e){m(Object(l.a)(Object(l.a)({},j),{},Object(Je.a)({},e.target.name,e.target.value)))},p=function(){var e=Object(w.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o(!0),e.next=4,r(j);case 4:e.sent,o(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return W.a.get("accessToken")?Object(oe.jsx)(ee.a,{to:(null===n||void 0===n||null===(e=n.location)||void 0===e||null===(t=e.state)||void 0===t?void 0:t.from)||"/"}):Object(oe.jsxs)("div",{className:Xe.a.profileForm,children:[Object(oe.jsx)("div",{className:Ke()(Xe.a.profile_form__title,"mb-6 text text_type_main-medium"),children:"\u0412\u0445\u043e\u0434"}),Object(oe.jsxs)("form",{onSubmit:p,children:[Object(oe.jsx)("div",{className:Ke()(Xe.a.profile_form__group,"mb-6"),children:Object(oe.jsx)(te.Input,{type:"email",placeholder:"E-mail",name:"email",value:j.email,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",onChange:b})}),Object(oe.jsx)("div",{className:Ke()(Xe.a.profile_form__group,"mb-6"),children:Object(oe.jsx)(te.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",value:j.password,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",onChange:b})}),Object(oe.jsx)("div",{className:Ke()(Xe.a.profile_form__group,"mb-20"),children:Object(oe.jsx)(te.Button,{type:"primary",size:"medium",children:i?Object(oe.jsx)(we,{}):"\u0412\u043e\u0439\u0442\u0438"})})]}),Object(oe.jsxs)("div",{className:Ke()(Xe.a.profile_form__group,"mb-4"),children:[Object(oe.jsx)("p",{className:Ke()(Xe.a.color_text,"text text_type_main-default"),children:"\u0412\u044b\xa0\u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"}),Object(oe.jsx)(A.b,{to:"/register",className:"color_link",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(oe.jsxs)("div",{className:Ke()(Xe.a.profile_form__group,"mb-4"),children:[Object(oe.jsx)("p",{className:Ke()(Xe.a.color_text,"text text_type_main-default"),children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(oe.jsx)(A.b,{to:"/forgot-password",className:"color_link",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})};var et=function(){return Object(oe.jsx)("div",{className:"container",children:Object(oe.jsx)($e,{})})},tt=n(42),nt=n.n(tt);var rt=function(){var e=$().logoutUser,t=Object(ee.j)("/profile"),n=Object(ee.j)("/profile/orders");return t&&t.isExact,n&&n.isExact,Object(oe.jsx)("div",{className:Ke()(nt.a.sidebar,"mr-15 sidebarWrap"),children:Object(oe.jsx)("nav",{className:nt.a.nav,children:Object(oe.jsxs)("ul",{className:nt.a.nav_list,children:[Object(oe.jsx)("li",{className:Ke()(nt.a.nav_item,"text text_type_main-medium"),children:Object(oe.jsx)(A.b,{to:{pathname:"/profile"},className:Ke()(nt.a.nav_item,"text text_type_main-medium"),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(oe.jsx)("li",{className:Ke()(nt.a.nav_item,"text text_type_main-medium"),children:Object(oe.jsx)(A.b,{to:"/profile/orders",className:Ke()(nt.a.nav_item,"text text_type_main-medium"),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(oe.jsx)("li",{className:Ke()(nt.a.nav_item,"text text_type_main-medium"),onClick:function(){e()},children:"\u0412\u044b\u0445\u043e\u0434"})]})})})};var at=function(e){var t=e.children,n=Object(ee.j)("/profile/orders"),r=n&&n.isExact;return Object(oe.jsx)("div",{className:"container",children:Object(oe.jsxs)("div",{className:Ke()("lk-wrapper profile-wrapper",r?"profile-orders":""),children:[Object(oe.jsx)(rt,{}),t]})})};var ct=function(){var e=R(),t=Object(a.useState)(!1),n=Object(be.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)({name:"",email:"",password:""}),i=Object(be.a)(s,2),o=i[0],d=i[1],u=function(e){d(Object(l.a)(Object(l.a)({},o),{},Object(Je.a)({},e.target.name,e.target.value)))},j=function(){var t=Object(w.a)(D.a.mark((function t(n){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),c(!0),t.next=4,K.register(o)(e);case 4:c(!1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return W.a.get("accessToken")&&ee.a,Object(oe.jsxs)("div",{className:Xe.a.profileForm,children:[Object(oe.jsx)("div",{className:Ke()(Xe.a.profile_form__title,"mb-6 text text_type_main-medium"),children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(oe.jsxs)("form",{onSubmit:j,children:[Object(oe.jsx)("div",{className:Ke()(Xe.a.profile_form__group,"mb-6"),children:Object(oe.jsx)(te.Input,{type:"text",placeholder:"\u0418\u043c\u044f",name:"name",value:o.name,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",onChange:u})}),Object(oe.jsx)("div",{className:Ke()(Xe.a.profile_form__group,"mb-6"),children:Object(oe.jsx)(te.Input,{type:"email",placeholder:"E-mail",name:"email",value:o.email,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",onChange:u})}),Object(oe.jsx)("div",{className:Ke()(Xe.a.profile_form__group,"mb-6"),children:Object(oe.jsx)(te.PasswordInput,{name:"password",value:o.password,onChange:u})}),Object(oe.jsx)("div",{className:Ke()(Xe.a.profile_form__group,"mb-20"),children:Object(oe.jsx)(te.Button,{type:"primary",size:"medium",children:r?Object(oe.jsx)(we,{}):"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]}),Object(oe.jsxs)("div",{className:Ke()(Xe.a.profile_form__group,"mb-4"),children:[Object(oe.jsx)("p",{className:Ke()(Xe.a.color_text,"text text_type_main-default"),children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(oe.jsx)(A.b,{to:"/login",className:"color_link",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})};var st=function(){return Object(oe.jsx)("div",{className:"container",children:Object(oe.jsx)(ct,{})})};var it=function(){var e=Object(ee.h)(),t=Object(ee.g)(),n=$().resetPassword,r=me((function(e){return e.userState})).user,c=Object(a.useState)({password:"",token:"",code:""}),s=Object(be.a)(c,2),i=s[0],o=s[1],d=function(e){o(Object(l.a)(Object(l.a)({},i),{},Object(Je.a)({},e.target.name,e.target.value)))},u=function(){var e=Object(w.a)(D.a.mark((function e(r){var a,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),a=W.a.get("token")||"",""===i.code){e.next=12;break}return o(Object(l.a)(Object(l.a)({},i),{},{token:a})),e.next=6,n(i);case 6:if(!(c=e.sent)||null===c||void 0===c||!c.success){e.next=11;break}t.push("/login"),e.next=12;break;case 11:return e.abrupt("return");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r?Object(oe.jsx)(ee.a,{to:"/"}):!e.state||e.state&&"/forgot-password"!==e.state.from.pathname?Object(oe.jsx)(ee.a,{to:"/forgot-password"}):Object(oe.jsxs)("div",{className:Xe.a.profileForm,children:[Object(oe.jsx)("div",{className:Ke()(Xe.a.profile_form__title,"mb-6 text text_type_main-medium"),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(oe.jsxs)("form",{onSubmit:u,children:[Object(oe.jsx)("div",{className:Ke()(Xe.a.profile_form__group,"mb-6"),children:Object(oe.jsx)(te.Input,{type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",name:"passowrd",value:i.password,icon:"ShowIcon",onChange:d})}),Object(oe.jsx)("div",{className:Ke()(Xe.a.profile_form__group,"mb-6"),children:Object(oe.jsx)(te.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",name:"code",value:i.code,onChange:d})}),Object(oe.jsx)("div",{className:Ke()(Xe.a.profile_form__group,"mb-20"),children:Object(oe.jsx)(te.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),Object(oe.jsxs)("div",{className:Ke()(Xe.a.profile_form__group,"mb-4"),children:[Object(oe.jsx)("p",{className:Ke()(Xe.a.color_text,"text text_type_main-default"),children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(oe.jsx)(A.b,{to:"/login",className:"color_link",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})};var ot=function(){return Object(oe.jsx)("div",{children:Object(oe.jsx)(it,{})})},dt=function(){var e=Object(ee.i)().id,t=me((function(e){return e.modalState})).modalIsOpen,n=me((function(e){return e.ingredientsState})).ingredients.find((function(t){return t._id===e}));return Object(oe.jsxs)("div",{className:ce()(Be.a.modalContent,Be.a.modalContentIngredient,t?"":Be.a.modalContentMargin),children:[Object(oe.jsx)("div",{className:"modalHeader text text_type_main-large",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),n&&Object(oe.jsxs)("div",{className:Be.a.modalContentWrap,children:[Object(oe.jsx)("div",{className:"modalContentImg mb-4",children:Object(oe.jsx)("img",{src:n.image_large,alt:""})}),Object(oe.jsx)("div",{className:ce()(Be.a.modalContentTitle," text text_type_main-medium mb-8"),children:n.name}),Object(oe.jsxs)("div",{className:Be.a.modalContentItems,children:[Object(oe.jsxs)("div",{className:ce()(Be.a.modalContentItem,"mr-5"),children:[Object(oe.jsx)("span",{className:"text text_type_main-default",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(oe.jsx)("div",{className:Be.a.value,children:n.calories})]}),Object(oe.jsxs)("div",{className:ce()(Be.a.modalContentItem,"mr-5"),children:[Object(oe.jsx)("span",{className:"text text_type_main-default",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(oe.jsx)("div",{className:Be.a.value,children:n.proteins})]}),Object(oe.jsxs)("div",{className:ce()(Be.a.modalContentItem,"mr-5"),children:[Object(oe.jsx)("span",{className:"text text_type_main-default",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(oe.jsx)("div",{className:Be.a.value,children:n.fat})]}),Object(oe.jsxs)("div",{className:ce()(Be.a.modalContentItem),children:[Object(oe.jsx)("span",{className:"text text_type_main-default",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(oe.jsx)("div",{className:Be.a.value,children:n.carbohydrates})]})]})]})]})},ut=n(123),lt=n.n(ut);var jt=function(){var e=R(),t=me((function(e){return e.userState})).user,n=Object(a.useState)(!1),r=Object(be.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)({name:"",email:"",password:""}),o=Object(be.a)(i,2),d=o[0],u=o[1],j=Object(a.useState)(!1),m=Object(be.a)(j,2),b=m[0],p=m[1],O=Object(a.useState)(!1),_=Object(be.a)(O,2),f=_[0],x=_[1],h=Object(a.useState)(!1),v=Object(be.a)(h,2),g=v[0],N=v[1],E=function(e){u(Object(l.a)(Object(l.a)({},d),{},Object(Je.a)({},e.target.name,e.target.value)))},C=function(e){e.preventDefault(),u(Object(l.a)(Object(l.a)({},d),{},{name:t.name,email:t.email,password:""}))},S=function(){var t=Object(w.a)(D.a.mark((function t(){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.getUserInformation()(e);case 2:(n=t.sent)&&null!==n&&void 0!==n&&n.success&&null!==n&&void 0!==n&&n.user&&u(Object(l.a)(Object(l.a)({},d),{},{name:n.user.name,email:n.user.email}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y=function(){var t=Object(w.a)(D.a.mark((function t(n){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),s(!0),t.next=4,K.changeUserData(d)(e);case 4:t.sent&&s(!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){S()}),[]),Object(oe.jsx)("div",{className:lt.a.lk_form,children:Object(oe.jsxs)("form",{children:[Object(oe.jsx)("div",{className:"form_group mb-6",children:Object(oe.jsx)(te.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:E,onIconClick:function(){return p(!0)},onBlur:function(){return p(!1)},icon:b?"CloseIcon":"EditIcon",disabled:!b,value:d.name,name:"name",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430"})}),Object(oe.jsx)("div",{className:"form_group mb-6",children:Object(oe.jsx)(te.Input,{type:"email",placeholder:"Email",onChange:E,onIconClick:function(){return x(!0)},onBlur:function(){return x(!1)},icon:f?"CloseIcon":"EditIcon",disabled:!f,value:d.email,name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430"})}),Object(oe.jsx)("div",{className:"form_group mb-6",children:Object(oe.jsx)(te.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:E,onIconClick:function(){return N(!0)},onBlur:function(){return N(!1)},icon:g?"CloseIcon":"EditIcon",disabled:!g,value:d.password,name:"password",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430"})}),Object(oe.jsxs)("div",{className:"form_group mb-6",children:[Object(oe.jsx)(te.Button,{type:"secondary",size:"medium",onClick:function(){return C},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(oe.jsxs)(te.Button,{type:"primary",size:"medium",onClick:function(){return y},children:["\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c ",c?Object(oe.jsx)(we,{}):null]})]})]})})},mt=n(94),bt=n.n(mt),pt=n(31),Ot=n.n(pt),_t=n(229),ft=n(232),xt=function(e){return Object(_t.a)(new Date(e),new Date,{locale:ft.a})},ht=function(e){var t=e.order,n=Object(ee.h)(),r=Object(ee.g)(),c=$().openModalAction,s=Object(ee.j)("/profile/orders"),i=s&&s.isExact,o=me((function(e){return e.ingredientsState})).ingredients,d=function(e){var t;return null===(t=o.find((function(t){return t._id===e})))||void 0===t?void 0:t.image},u=Object(a.useMemo)((function(){var e=0;return void 0===o?0:(t.ingredients.forEach((function(t){var n;o&&o.length>0&&(n=0|o.find((function(e){return(null===e||void 0===e?void 0:e._id)===t})).price)&&(e+=n)})),e)}),[o]);return o.length?Object(oe.jsxs)("div",{className:Ke()(Ot.a.feedItem,"p-6 mr-2 mb-4 feedWrap"),onClick:function(){if(function(e){return void 0!==e&&null!=e&&Object.keys(e).length>0&&null!==e.ingredients&&void 0!==e.ingredients&&e.ingredients.length>0}(t)){c({modalIsOpen:!0,mode:"FeedDetails"});var e=i?"/profile/orders/".concat(t._id):"/feed/".concat(t._id);r.push({pathname:e,state:{background:n}})}},children:[Object(oe.jsxs)("div",{className:Ke()(Ot.a.feedItemTop,"mb-6"),children:[Object(oe.jsx)("div",{className:Ke()(Ot.a.number,"text text_type_digits-default"),children:"#".concat(t.number)}),Object(oe.jsx)("div",{className:Ke()(Ot.a.date,"text text_color_inactive"),children:xt(t.createdAt)})]}),Object(oe.jsx)("div",{className:Ke()(Ot.a.feedItemName,"text text_type_main-medium",i?"mb-2":"mb-6"),children:t.name}),i?Object(oe.jsx)("p",{className:"text text_type_main-default mb-6 ".concat(Ot.a.status," ").concat("done"===t.status?Ot.a.done:""),children:function(e){var t="";switch(e){case"created":t="\u0421\u043e\u0437\u0434\u0430\u043d";break;case"pending":t="\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f";break;case"done":t="\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"}return t}(t.status)}):null,Object(oe.jsxs)("div",{className:Ot.a.feedItemBottom,children:[Object(oe.jsx)("div",{className:Ke()(Ot.a.feedItemIngredients,"pr-6"),children:t.ingredients&&t.ingredients.map((function(e,n){return n<=5?Object(oe.jsxs)("div",{className:Ot.a.feedItemIngredient,children:[Object(oe.jsx)("img",{src:d(e),alt:""}),t.ingredients.length>6&&5===n?Object(oe.jsxs)("div",{className:Ke()(Ot.a.count,"text text_type_digits-default text_type_main-medium"),children:["+",t.ingredients.length-6]}):null]},"feedItemIngredients_".concat(e,"_").concat(n)):null}))}),Object(oe.jsxs)("div",{className:Ot.a.feedItemPrice,children:[o?Object(oe.jsx)("span",{className:"text text_type_main-medium",children:u}):null,Object(oe.jsx)(te.CurrencyIcon,{type:"primary"})]})]})]}):null},vt=n(22),gt=n.n(vt),Nt=function(e){var t=e.orders,n=e.total,r=e.totalToday,c=Object(a.useMemo)((function(){var e=t.filter((function(e){return"done"===e.status}))||[];if(e.length)return e.slice(-20).reduce((function(e,t){return 10===e[e.length-1].length&&e.push([]),e[e.length-1].push(t),e}),[[]])}),[t]),s=Object(a.useMemo)((function(){var e=t.filter((function(e){return"done"!==e.status}))||[];if(e.length)return e.reduce((function(e,t){return 5===e[e.length-1].length&&e.push([]),e[e.length-1].push(t),e}),[[]])}),[t]);return Object(oe.jsxs)("div",{className:gt.a.feedTotal,children:[Object(oe.jsxs)("div",{className:Ke()(gt.a.feedTotalTop),children:[Object(oe.jsx)("div",{className:Ke()(gt.a.feedTotalTopLeft,"mr-9"),children:Object(oe.jsx)("div",{className:gt.a.feedTotalItem,children:c&&c.map((function(e,t){return Object(oe.jsxs)("div",{className:Ke()(gt.a.feedTotalItemW,"mb-15"),children:[Object(oe.jsx)("div",{className:Ke()(gt.a.title,"mb-6"),children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(oe.jsx)("div",{className:gt.a.items,children:e&&e.map((function(e,t){return Object(oe.jsx)("span",{className:"text text_type_digits-default",children:null===e||void 0===e?void 0:e.number},"index_text".concat(t))}))})]},"index_".concat(t))}))})}),Object(oe.jsx)("div",{className:gt.a.feedTotalTopRight,children:Object(oe.jsx)("div",{className:gt.a.feedTotalItem,children:s&&s.map((function(e,t){return Object(oe.jsxs)("div",{className:Ke()(gt.a.feedTotalItemW,"mb-15"),children:[Object(oe.jsx)("div",{className:Ke()(gt.a.title,"mb-6"),children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(oe.jsx)("div",{className:gt.a.items,children:e&&e.map((function(e,t){return Object(oe.jsx)("span",{className:"text text_type_digits-default",children:null===e||void 0===e?void 0:e.number},"index_text".concat(t,"_not_done"))}))})]},"index_".concat(t,"_not"))}))})})]}),Object(oe.jsxs)("div",{className:Ke()(gt.a.feedTotalBlock,"mb-6"),children:[Object(oe.jsx)("div",{className:Ke()(gt.a.feedTotalTitle,"text text_type_main-medium"),children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(oe.jsx)("div",{className:Ke()(gt.a.feedTotalNumber,"text text_type_digits-large"),children:n})]}),Object(oe.jsxs)("div",{className:Ke()(gt.a.feedTotalBlock,"mb-6"),children:[Object(oe.jsx)("div",{className:Ke()(gt.a.feedTotalTitle,"text text_type_main-medium"),children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(oe.jsx)("div",{className:Ke()(gt.a.feedTotalNumber,"text text_type_digits-large"),children:r})]})]})},Et=function(){var e=$(),t=e.wsConnectionStart,n=e.wsConnectionStop,r=me((function(e){return e.feedState})),c=r.orders,s=r.total,i=r.totalToday;return Object(a.useEffect)((function(){t("wss://norma.nomoreparties.space/orders/all")}),[]),Object(a.useEffect)((function(){return function(){n()}}),[]),c.length?Object(oe.jsxs)("div",{className:"container",children:[Object(oe.jsx)("h1",{className:"text text_type_main-large mt-10 mb-5 title",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(oe.jsxs)("div",{className:"row",children:[Object(oe.jsx)("div",{className:Ke()(bt.a.feedItemsWrap,"customScroll"),children:c&&c.map((function(e,t){return Object(oe.jsx)(ht,{order:e},"".concat(e._id,"_").concat(t))}))}),Object(oe.jsx)(Nt,{orders:c,total:s,totalToday:i})]})]}):Object(oe.jsx)("div",{className:bt.a.feedLoader,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})},Ct=function(){var e=Object(ee.j)().path;return Object(oe.jsxs)(ee.d,{children:[Object(oe.jsx)(ee.b,{exact:!0,path:"".concat(e),children:Object(oe.jsx)(Et,{})}),Object(oe.jsx)(ee.b,{path:"".concat(e,"/:id")}),Object(oe.jsx)(ee.b,{children:Object(oe.jsx)(ee.a,{to:e})})]})},St=function(){var e=$(),t=e.wsConnectionStart,n=e.wsConnectionStop,r=Object(ee.i)().id,c=Object(ee.j)("/profile/orders/:id"),s=c&&c.isExact,i=me((function(e){return e.modalState})).modalIsOpen,o=me((function(e){return e.feedState})),d=o.orders,u=o.wsConnected,l=me((function(e){return e.ingredientsState})).ingredients,j=Object(a.useMemo)((function(){if(d.length)return d.find((function(e){return e._id===r}))}),[d]),m=Object(a.useMemo)((function(){if(j){var e,t=[],n=null===(e=j.ingredients)||void 0===e?void 0:e.map((function(e){return l.find((function(t){return t._id===e}))}));return n.forEach((function(e){if(t.some((function(t){return t._id===e._id}))){var n=t.find((function(t){return t._id===e._id}));n&&"bun"===n.type&&n.__v<2&&(n.__v=n.__v+1)}else e&&(0===e.__v&&(e.__v=e.__v+1),t.push(e))})),t}}),[d,j,l]),b=Object(a.useMemo)((function(){if(m&&m.length)return m.reduce((function(e,t){return 0!==t.__v?e+t.price*t.__v:e+t.price}),0)}),[m,l,u]);return Object(a.useEffect)((function(){if(!u&&s){var e,n=null===(e=W.a.get("accessToken"))||void 0===e?void 0:e.split("Bearer ")[1],r="wss://norma.nomoreparties.space/orders?token=".concat(n);t(r)}u||s||t("wss://norma.nomoreparties.space/orders/all")}),[]),Object(a.useEffect)((function(){return function(){n()}}),[]),j?Object(oe.jsxs)("div",{className:ce()(Be.a.modalContent,Be.a.modalContentIngredient,i?"":Be.a.modalContentMargin,Be.a.modalFeed),children:[Object(oe.jsxs)("div",{className:"modalHeader text text_type_digits-default mb-10",children:["#",j.number]}),Object(oe.jsxs)("div",{className:Be.a.feed_modal_wrapper,children:[Object(oe.jsx)("h2",{className:"text text_type_main-medium mb-3",children:null===j||void 0===j?void 0:j.name}),Object(oe.jsx)("p",{className:"text text_type_main-default mb-15 ".concat(Be.a.status," ").concat("done"===j.status?Be.a.done:""),children:function(e){var t="";switch(e){case"created":t="\u0421\u043e\u0437\u0434\u0430\u043d";break;case"pending":t="\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f";break;case"done":t="\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"}return t}(j.status)}),Object(oe.jsx)("h2",{className:"text text_type_main-medium mb-6 ",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(oe.jsx)("div",{className:ce()(Be.a.ingredients_list,"mb-10 pr-6 customScroll"),children:m&&(null===m||void 0===m?void 0:m.map((function(e,t){return Object(oe.jsxs)("div",{className:ce()(Be.a.ingredientListItem,"mb-4"),children:[Object(oe.jsx)("div",{className:ce()(Be.a.feedItemIngredient,"mr-4"),children:Object(oe.jsx)("img",{src:null===e||void 0===e?void 0:e.image,alt:""})}),Object(oe.jsx)("div",{className:"text text_type_main-default",children:null===e||void 0===e?void 0:e.name}),Object(oe.jsxs)("div",{className:ce()(Be.a.ingredientListItemCost,"ml-4"),children:[Object(oe.jsx)("p",{className:"text text_type_digits-default",children:"".concat(null===e||void 0===e?void 0:e.__v,"x").concat(null===e||void 0===e?void 0:e.price)}),Object(oe.jsx)(te.CurrencyIcon,{type:"primary"})]})]},"ingredientListItem".concat(t,"_").concat(null===e||void 0===e?void 0:e._id))})))}),Object(oe.jsxs)("div",{className:Be.a.ingredients_footer,children:[Object(oe.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:xt(j.createdAt)}),Object(oe.jsxs)("div",{className:Be.a.ingredient_cost,children:[Object(oe.jsx)("p",{className:"text text_type_digits-default",children:b}),Object(oe.jsx)(te.CurrencyIcon,{type:"primary"})]})]})]})]}):Object(oe.jsx)("div",{className:"",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})},yt=function(){var e=$(),t=e.wsConnectionStart,n=e.wsConnectionStop,r=me((function(e){return e.feedState})),c=r.orders;return Object(a.useEffect)((function(){var e,n=null===(e=W.a.get("accessToken"))||void 0===e?void 0:e.split("Bearer ")[1],r="wss://norma.nomoreparties.space/orders?token=".concat(n);t(r)}),[]),Object(a.useEffect)((function(){return function(){n()}}),[]),c.length?Object(oe.jsx)("div",{className:"profileOrders pr-2 customScroll",children:c&&c.map((function(e,t){return Object(oe.jsx)(ht,{order:e},"".concat(e._id,"_").concat(t))}))}):Object(oe.jsx)("div",{className:"",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})};var Tt=function(){var e=Object(ee.h)(),t=Object(ee.g)(),n=Object(ee.j)("/profile/orders"),r=(n&&n.isExact,$().closeModalAction),a=Object(ee.h)().state,c=(null!==a&&void 0!==a?a:{}).background;return"PUSH"!==t.action&&(c=void 0),Object(oe.jsxs)("main",{children:[Object(oe.jsxs)(ee.d,{location:c||e,children:[Object(oe.jsx)(ee.b,{exact:!0,path:"/",children:Object(oe.jsx)(ze,{})}),Object(oe.jsx)(ee.b,{exact:!0,path:"/login",children:Object(oe.jsx)(et,{})}),Object(oe.jsx)(ee.b,{exact:!0,path:"/register",children:Object(oe.jsx)(st,{})}),Object(oe.jsx)(ee.b,{exact:!0,path:"/forgot-password",children:Object(oe.jsx)(Ye,{})}),Object(oe.jsx)(ee.b,{exact:!0,path:"/reset-password",children:Object(oe.jsx)(ot,{})}),Object(oe.jsx)(Ve,{exact:!0,path:"/profile",children:Object(oe.jsx)(at,{children:Object(oe.jsx)(jt,{})})}),Object(oe.jsx)(Ve,{exact:!0,path:"/profile/orders",children:Object(oe.jsx)(at,{children:Object(oe.jsx)(yt,{})})}),Object(oe.jsx)(ee.b,{exact:!0,path:"/ingredients/:id",children:Object(oe.jsx)(dt,{})}),Object(oe.jsx)(ee.b,{exact:!0,path:"/logout",children:Object(oe.jsx)(at,{})}),Object(oe.jsx)(ee.b,{exact:!0,path:"/feed",children:Object(oe.jsx)(Ct,{})}),Object(oe.jsx)(ee.b,{exact:!0,path:"/feed/:id",children:Object(oe.jsx)(St,{})}),Object(oe.jsx)(ee.b,{exact:!0,path:"/profile/orders/:id",children:Object(oe.jsx)(St,{})})]}),c&&Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(ee.b,{path:"/ingredients/:id",children:Object(oe.jsx)(Ge,{show:!0,onClose:function(){return r(),void t.push("/")},children:Object(oe.jsx)(dt,{})})}),Object(oe.jsx)(ee.b,{exact:!0,path:"/feed/:id",children:Object(oe.jsx)(Ge,{show:!0,onClose:function(){return r(),void t.push("/feed")},children:Object(oe.jsx)(St,{})})}),Object(oe.jsx)(ee.b,{exact:!0,path:"/profile/orders/:id",children:Object(oe.jsx)(Ge,{show:!0,onClose:function(){return r(),void t.push("/profile/orders")},children:Object(oe.jsx)(St,{})})})]})]})};var It=function(){var e=$(),t=e.getIngredients,n=e.setUserAuth,r=me((function(e){return e.ingredientsState})),c=r.error,s=Object(a.useCallback)(Object(w.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:case"end":return e.stop()}}),e)}))),[]);return Object(a.useEffect)((function(){s(),W.a.get("accessToken")&&n(!0)}),[s]),Object(oe.jsx)("div",{children:Object(oe.jsxs)(A.a,{children:[Object(oe.jsx)(ue,{}),!c&&Object(oe.jsx)(Tt,{})]})})};i.a.render(Object(oe.jsx)(c.a.StrictMode,{children:Object(oe.jsx)(o.a,{store:I,children:Object(oe.jsx)(It,{})})}),document.getElementById("root"))},31:function(e,t,n){e.exports={feedItem:"style_feedItem__3WUW2",feedItemTop:"style_feedItemTop__2f7gW",number:"style_number__3i54k",date:"style_date__225cw",feedItemName:"style_feedItemName__3jb_O",feedItemBottom:"style_feedItemBottom__2ug0h",feedItemIngredients:"style_feedItemIngredients__2gQut",feedItemIngredient:"style_feedItemIngredient__2LeIh",feedItemPrice:"style_feedItemPrice__zPw9z",count:"style_count__2w_qr",status:"style_status__3TRPG",done:"style_done__3E3HB"}},35:function(e,t,n){e.exports={burgerCards:"BurgerConstructor_burgerCards__120hJ",BurgerConstructorsWrapper:"BurgerConstructor_BurgerConstructorsWrapper__1PTJ9",burgerWrapper:"BurgerConstructor_burgerWrapper__2DIgN",burgerCard:"BurgerConstructor_burgerCard__2uPAW","constructor-element":"BurgerConstructor_constructor-element__2712R",burderCardIcon:"BurgerConstructor_burderCardIcon__3NDPa",burgerTotalPrice:"BurgerConstructor_burgerTotalPrice__14jsX",price:"BurgerConstructor_price__1jkrb",button_wrapper:"BurgerConstructor_button_wrapper__-obqV"}},42:function(e,t,n){e.exports={sidebar:"Sidebar_sidebar__1wYcA",nav:"Sidebar_nav__2MKUB",nav_list:"Sidebar_nav_list__2FHHY",nav_item:"Sidebar_nav_item__3hDkr"}},57:function(e,t,n){e.exports={header:"AppHeader_header__X9aJA",headerWrap:"AppHeader_headerWrap__-eeZl",headerLogo:"AppHeader_headerLogo__3U_fV",headerMenuList:"AppHeader_headerMenuList__2z4Mz"}},67:function(e,t,n){e.exports={burgerItem:"BurgerIngredient_burgerItem__1OQv1",burderItemPrice:"BurgerIngredient_burderItemPrice__2-XP5",burgerItemlink:"BurgerIngredient_burgerItemlink__Gx9Ec"}},68:function(e,t,n){e.exports={modalContent:"orderDetails_modalContent__BQkpV",modalOrderTitle:"orderDetails_modalOrderTitle__3IspM",textDark:"orderDetails_textDark__3oM3d",appButton:"orderDetails_appButton__1THRY"}},90:function(e,t,n){e.exports={headerMenuItem:"AppMenuItem_headerMenuItem__SWzj1",headerMenuItemIcon:"AppMenuItem_headerMenuItemIcon__35SfN"}},94:function(e,t,n){e.exports={feedItemsWrap:"style_feedItemsWrap__3HjvH"}}},[[220,1,2]]]);
//# sourceMappingURL=main.a6acb6b4.chunk.js.map