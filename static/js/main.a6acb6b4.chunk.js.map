{"version":3,"sources":["components/BurgerIngredients/BurgerIngredients.module.css","components/BurgerIngredientSection/BurgerIngredientSection.module.css","components/Icons/loader.module.css","components/Modal/modalOverlay.module.css","components/ProfileForm/index.module.css","components/LoginForm/styles.module.css","components/Modal/modal.module.css","components/FeedTotal/style.module.css","services/actions/ingredients/types.ts","services/reducers/ingredients.ts","services/actions/modal/types.ts","services/reducers/modal.ts","services/actions/constructor/types.ts","helpers/index.ts","services/actions/order/types.ts","services/reducers/constructor.ts","services/reducers/order.ts","services/actions/user/types.ts","services/reducers/user.ts","services/actions/ws/types.ts","services/reducers/feed.ts","services/reducers/index.ts","middleware/socketMiddleware.ts","services/index.ts","utils/constans.ts","api/index.ts","services/actions/order/order-actions.ts","services/actions/constructor/constructor-actions.ts","services/actions/ingredients/ingredients-actions.ts","services/actions/modal/modal-actions.ts","services/actions/user/user-actions.ts","services/actions/ws/ws-actions.ts","services/actions/index.ts","hooks/useActions.ts","components/AppMenuItem/AppMenuItem.tsx","components/AppHeader/AppHeader.tsx","hooks/useTypedSelector.ts","components/BurgerIngredient/BurgerIngredient.tsx","components/BurgerIngredientSection/BurgerIngredientSection.tsx","components/BurgerIngredients/BurgerIngredients.tsx","components/BurgerConstructorItem/BurgerConstructorItem.tsx","components/Icons/Loader.jsx","components/BurgerConstructor/BurgerConstructor.tsx","components/Main/Main.tsx","components/Modal/ModalOverlay.tsx","components/Modal/Modal.tsx","components/Icons/IconSuccess.jsx","components/OrderDetails/OrderDetails.tsx","pages/HomePage/index.tsx","components/ProtectedRoute/index.tsx","components/ForgotForm/index.tsx","pages/ForgotPassword/index.tsx","components/LoginForm/index.tsx","pages/Login/index.tsx","components/Sidebar/index.tsx","pages/Profile/index.tsx","components/RegisterForm/index.tsx","pages/Register/index.tsx","components/ResetForm/index.tsx","pages/ResetPassword/index.tsx","components/IngredientDetails/IngredientDetails.tsx","components/ProfileForm/index.tsx","helpers/time.ts","components/FeedItem/index.tsx","components/FeedTotal/index.tsx","components/FeedPages/index.tsx","pages/Feed/index.tsx","components/FeedDetails/index.tsx","components/ProfileOrder/index.tsx","components/AppMain/AppMain.tsx","components/App/App.tsx","index.tsx","components/FeedItem/style.module.css","components/BurgerConstructor/BurgerConstructor.module.css","components/Sidebar/index.module.css","components/AppHeader/AppHeader.module.css","components/BurgerIngredient/BurgerIngredient.module.css","components/OrderDetails/orderDetails.module.css","components/AppMenuItem/AppMenuItem.module.css","components/FeedPages/style.module.css"],"names":["module","exports","ActionIngredientsTypes","ActionModalTypes","initialState","ingredients","ingredientSelect","error","clearIngredientsSelecteds","arr","forEach","x","__v","modalMode","modalIsOpen","ActionConstructorTypes","ActionOrderTypes","sortArray","array","from","to","el","splice","burderConstructor","bun","totalPrice","ActionUserTypes","orderNumber","loader","ActionWSTypes","user","isForgotPasswordRequest","isAuth","orders","ordersUser","total","totalToday","totalUser","totalTodayUser","wsConnected","wsConnectionFailed","wsConnectedUser","wsConnectionFailedUser","wsActions","rootReducer","combineReducers","ingredientsState","state","action","type","INGREDIENTS_FETCH","payload","INGREDIENTS_ERROR","INGREDIENTS_SELECTED","CLEAR_INGREDIENTS_SELECTEDS","burgerState","SET_BUN","SET_INGREDIENT","SORT_INGREDIENT","index","atIndex","SET_PRICE","CLEAR_CONSTRUCTOR","REMOVE_BUN","REMOVE_INGREDIENT","filter","idx","modalState","OPENMODAL","mode","CLOSEMODAL","orderState","SET_ORDER","SET_LOADER","userState","SET_USER","SET_USERAUTH","SET_FORGOT_PASSWORD","feedState","WS_CONNECTION_START","WS_CONNECTION_SUCCESS","WS_GET_MESSAGE","WS_CONNECTION_CLOSED","WS_CONNECTION_STOP","socketObject","WS_CONNECTION_ERROR","WS_SEND_MESSAGE","store","createStore","applyMiddleware","thunk","socket","next","dispatch","WebSocket","close","onopen","event","onerror","onmessage","data","includes","send","JSON","parse","success","onclose","stringify","useAppDispatch","useDispatch","BASE_URL","fetchRequest","api","a","url","fetch","then","checkResponse","fetchPost","body","headers","Accept","Cookies","get","Object","assign","authorization","method","cache","credentials","post","token","checkResponseGET","patch","res","ok","json","Promise","reject","status","text","OrderActionCreators","getOrder","ingredientsData","response","order","number","catch","err","console","finally","setIsLoader","flag","ConstructorActionCreators","setBun","obj","uuid","uuidv4","objClone","objNew","setIngredient","setPrice","price","sortIngredientActions","removeIngredient","removeBun","IngredientsActionCreators","getIngredients","setIngredientSelected","ingredient","ModalActionCreators","openModalAction","closeModalAction","UserActionsCreator","updateToken","time","Date","getTime","set","accessToken","expires","refreshToken","logoutUser","remove","forgotPassword","form","resetPassword","register","login","changeUserData","getUser","getUserInformation","resposnse","setUserAuth","WS","wsConnectionSuccess","wsConnectionStart","wsConnectionError","wsConnectionClosed","wsConnectionGetMessage","wsConnectionSengMessage","wsConnectionStop","allActionCreators","useActions","useMemo","bindActionCreators","AppMenuItem","title","Icon","onClick","isActive","className","classNames","styles","headerMenuItem","headerMenuItemIcon","AppHeader","history","useHistory","mainPage","useRouteMatch","feedPage","profilePage","mainPageActive","isExact","feedPageActive","profilePageActive","header","headerWrap","headerMenuList","push","pathname","headerLogo","useTypedSelector","useSelector","BurgerIngredient","location","useLocation","useDrag","item","_id","collect","monitor","opacity","isDragging","dragIngredient","burgerItem","ref","style","burgerItemlink","background","count","size","src","image","alt","burderItemPrice","name","BurgerIngredientSection","bunsRef","saucesRef","mainsRef","burgerIngredientSection","map","BurgerIngredients","ingredientTypeTitles","sauce","main","scrollRef","useRef","useState","current","setCurrent","sortItems","sort","b","typesIngredient","keys","active","value","burgerItems","onScroll","scrollContainerPosition","getBoundingClientRect","top","bunHeaderPosition","sauceHeaderPosition","mainHeaderPosition","bunsDiff","Math","abs","saucesDiff","mainsDiff","BurgerConstructorItem","children","findIngredient","ingredientsIndex","sortIngredient","originalIndex","end","droppedId","didDrop","drooppedIndex","drag","useDrop","accept","hover","draggedId","overIndex","draggedIndex","drop","burgerCard","Loader","xmlns","xmlnsXlink","viewBox","icon","cx","cy","r","stroke","strokeWidth","strokeLinecap","fill","strokeDasharray","strokeDashoffset","attributeName","repeatCount","dur","values","keyTimes","BurgerCards","onDropHandler","hasDisabled","setHasDisabled","bunItem","itemId","dropIngredientCard","dropIngredient","useEffect","bunPrice","ingredientsPrices","reduce","acc","val","handlerName","orderAdd","bunId","ingredientsId","useCallback","findItem","i","indexOf","burgerCards","BurgerConstructorsWrapper","isLocked","thumbnail","burgerWrapper","burderCardIcon","position","locker","handleClose","find","removeItem","burgerTotalPrice","button_wrapper","disabled","Main","length","ModalOverlay","modalOverlay","Modal","show","onClose","target","document","getElementById","overlayRef","closeOnEsc","e","key","onOutside","contains","addEventListener","removeEventListener","overflow","ReactDOM","createPortal","modal","modalCloseButton","IconSuccess","width","height","fillRule","clipRule","d","fillOpacity","id","gradientUnits","gradientTransform","stopColor","stopOpacity","offset","OrderDetails","modalContent","modalOrderTitle","textDark","App","DndProvider","backend","HTML5Backend","ProtectedRoute","path","exact","render","RegisterForm","email","setValue","submitForm","preventDefault","profileForm","profile_form__title","onSubmit","profile_form__group","placeholder","errorText","onChange","color_text","ForgotPassword","ForgotForm","LoginForm","setLoader","password","Login","Sidebar","profileOrdersPage","sidebar","nav","nav_list","nav_item","Profile","profileOrders","profileOrdersActive","cs","Register","ResetForm","code","ResetPassword","IngredientDetails","useParams","modalContentIngredient","modalContentMargin","modalContentWrap","image_large","modalContentTitle","modalContentItems","modalContentItem","calories","proteins","fat","carbohydrates","ProfileForm","setForm","isFocusName","setFocusName","isFocusEmail","setFocusEmail","isFocusPassword","setFocusPassword","cancelClick","fetchUse","lk_form","onIconClick","onBlur","formatDate","date","formatRelative","locale","ru","FeedItem","findImages","ingredientsPrice","undefined","feedItem","checkOrder","feedItemTop","createdAt","feedItemName","done","getStatus","feedItemBottom","feedItemIngredients","feedItemIngredient","feedItemPrice","FeedTotal","findDoneArray","doneArray","slice","p","c","findNotDoneArray","feedTotal","feedTotalTop","feedTotalTopLeft","feedTotalItem","feedTotalItemW","items","feedTotalTopRight","feedTotalBlock","feedTotalTitle","feedTotalNumber","FeedPages","feedItemsWrap","feedLoader","FeedPage","FeedDetails","findI","ingredientsArray","some","ing","findElement","orderTotalPrice","split","modalFeed","feed_modal_wrapper","ingredients_list","ingredientListItem","ingredientListItemCost","ingredients_footer","ingredient_cost","ProfileOrder","AppMain","locationState","HomePage","Feed","fetchData","StrictMode"],"mappings":"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","file":"static/js/main.a6acb6b4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerItems\":\"BurgerIngredients_burgerItems__13KGK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerIngredientSection\":\"BurgerIngredientSection_burgerIngredientSection__ZWA2x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"loader_icon__3dSKh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalOverlay\":\"modalOverlay_modalOverlay__3LiiJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"lk_form\":\"ProfileForm_lk_form__2x83w\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileForm\":\"styles_profileForm__gAMjh\",\"profile_form__title\":\"styles_profile_form__title__sibGH\",\"profile_form__group\":\"styles_profile_form__group__3Jpcx\",\"color_text\":\"styles_color_text__3tQm5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__3OAHy\",\"modalContentIngredient\":\"modal_modalContentIngredient__3OQOQ\",\"modalContentMargin\":\"modal_modalContentMargin__3v8KZ\",\"modalCloseButton\":\"modal_modalCloseButton__3QKmY\",\"modalContentWrap\":\"modal_modalContentWrap__3iXA-\",\"modalContentTitle\":\"modal_modalContentTitle__wLntF\",\"modalContentItems\":\"modal_modalContentItems__2mY9Q\",\"modalContentItem\":\"modal_modalContentItem__2cAQy\",\"value\":\"modal_value__2a51u\",\"modalContentBottom\":\"modal_modalContentBottom__27QeI\",\"modalFeed\":\"modal_modalFeed__YWExd\",\"modalHeader\":\"modal_modalHeader__2-cnq\",\"status\":\"modal_status__3kXP7\",\"done\":\"modal_done__Qgt95\",\"ingredientListItem\":\"modal_ingredientListItem__3FhF2\",\"feedItemIngredient\":\"modal_feedItemIngredient__2NZwU\",\"ingredientListItemCost\":\"modal_ingredientListItemCost__3PPXl\",\"ingredients_list\":\"modal_ingredients_list__2pdwv\",\"ingredients_footer\":\"modal_ingredients_footer__3s244\",\"ingredient_cost\":\"modal_ingredient_cost__3_0XX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"feedTotal\":\"style_feedTotal__Lbh5E\",\"feedTotalTop\":\"style_feedTotalTop__2GrBK\",\"feedTotalItem\":\"style_feedTotalItem__1DvVS\",\"feedTotalTopLeft\":\"style_feedTotalTopLeft__uBNz9\",\"feedTotalTopRight\":\"style_feedTotalTopRight__3MdRH\",\"feedTotalItemW\":\"style_feedTotalItemW__1bQVh\",\"title\":\"style_title__2R6Dj\"};","import { ingredientType } from '../../../types';\n\nexport enum ActionIngredientsTypes {\n  INGREDIENTS_FETCH = 'INGREDIENTS_FETCH',\n  INGREDIENTS_ERROR = 'INGREDIENTS_ERROR',\n  INGREDIENTS_SELECTED = 'INGREDIENTS_SELECTED',\n  CLEAR_INGREDIENTS_SELECTEDS = 'CLEAR_INGREDIENTS_SELECTEDS',\n}\n\ninterface INGREDIENTS_FETCH {\n  type: ActionIngredientsTypes.INGREDIENTS_FETCH;\n  payload: ingredientType[];\n}\ninterface SetError {\n  type: ActionIngredientsTypes.INGREDIENTS_ERROR;\n  payload: boolean;\n}\ninterface SetIngredientSelected {\n  type: ActionIngredientsTypes.INGREDIENTS_SELECTED;\n  payload: ingredientType;\n}\ninterface SetClearIngredientSelected {\n  type: ActionIngredientsTypes.CLEAR_INGREDIENTS_SELECTEDS;\n  // payload: { index: number; atIndex: number };\n}\n\nexport type IngredientAction =\n  | INGREDIENTS_FETCH\n  | SetError\n  | SetIngredientSelected\n  | SetClearIngredientSelected;\n","import { ingredientType } from '../../types';\nimport {\n  ActionIngredientsTypes,\n  IngredientAction,\n} from '../actions/ingredients/types';\n//Для ревьюера случайно сделал типизацию стора раньше времени. Если будут замечения по стору в следующем спринте поправлю.\ninterface IngredientS {\n  ingredients: ingredientType[] | [];\n  ingredientSelect: ingredientType | object;\n  error: boolean;\n}\n\nconst initialState: IngredientS = {\n  ingredients: [],\n  ingredientSelect: {},\n  error: false,\n};\n\nconst clearIngredientsSelecteds = (arr: ingredientType[]) => {\n  arr.forEach((x) => (x.__v = 0));\n  return arr;\n};\n\nexport default function ingredientsReducer(\n  state = initialState,\n  action: IngredientAction\n): IngredientS {\n  switch (action.type) {\n    case ActionIngredientsTypes.INGREDIENTS_FETCH:\n      return { ...state, ingredients: action.payload || [] };\n    case ActionIngredientsTypes.INGREDIENTS_ERROR:\n      return { ...state, error: action.payload };\n    case ActionIngredientsTypes.INGREDIENTS_SELECTED:\n      return { ...state, ingredientSelect: action.payload };\n    case ActionIngredientsTypes.CLEAR_INGREDIENTS_SELECTEDS:\n      return {\n        ...state,\n        ingredients: clearIngredientsSelecteds(state.ingredients),\n      };\n    default:\n      return state;\n  }\n}\n","export enum ActionModalTypes {\n  OPENMODAL = \"OPENMODAL\",\n  CLOSEMODAL = \"CLOSEMODAL\",\n}\n\ninterface openModalAction {\n  type: ActionModalTypes.OPENMODAL;\n  payload: { modalIsOpen: boolean; mode: string };\n}\ninterface closeModalAction {\n  type: ActionModalTypes.CLOSEMODAL;\n}\n\nexport type ModalAction = openModalAction | closeModalAction;\n","import { ActionModalTypes, ModalAction } from '../actions/modal/types';\n//Для ревьюера случайно сделал типизацию стора раньше времени. Если будут замечения по стору в следующем спринте поправлю.\ninterface IState {\n  modalMode: string;\n  modalIsOpen: boolean;\n}\nconst initialState: IState = {\n  modalMode: '',\n  modalIsOpen: false,\n};\n\nexport default function modalReducer(\n  state = initialState,\n  action: ModalAction\n): IState {\n  switch (action.type) {\n    case ActionModalTypes.OPENMODAL:\n      return {\n        ...state,\n        modalIsOpen: action.payload.modalIsOpen,\n        modalMode: action.payload.mode,\n      };\n    case ActionModalTypes.CLOSEMODAL:\n      return { ...state, modalIsOpen: false };\n    default:\n      return state;\n  }\n}\n","import { ingredientType } from \"../../../types\";\n\nexport enum ActionConstructorTypes {\n  SET_BUN = \"SET_BUN\",\n  SET_INGREDIENT = \"SET_INGREDIENT\",\n  SET_PRICE = \"SET_PRICE\",\n  SORT_INGREDIENT = \"SORT_INGREDIENT\",\n  REMOVE_INGREDIENT = \"REMOVE_INGREDIENT\",\n  REMOVE_BUN = \"REMOVE_BUN\",\n  CLEAR_CONSTRUCTOR = \"CLEAR_CONSTRUCTOR\",\n}\n\ninterface SetBun {\n  type: ActionConstructorTypes.SET_BUN;\n  payload: ingredientType;\n}\ninterface SetIngredient {\n  type: ActionConstructorTypes.SET_INGREDIENT;\n  payload: ingredientType;\n}\ninterface SetPrice {\n  type: ActionConstructorTypes.SET_PRICE;\n  payload: number;\n}\ninterface SortIngredientActions {\n  type: ActionConstructorTypes.SORT_INGREDIENT;\n  payload: { index: number; atIndex: number };\n}\ninterface RemoveIngredient {\n  type: ActionConstructorTypes.REMOVE_INGREDIENT;\n  payload: number;\n}\ninterface RemoveBun {\n  type: ActionConstructorTypes.REMOVE_BUN;\n}\ninterface ClearConstructor {\n  type: ActionConstructorTypes.CLEAR_CONSTRUCTOR;\n}\n\nexport type ConstructorAction =\n  | SetBun\n  | SetIngredient\n  | SetPrice\n  | SortIngredientActions\n  | RemoveIngredient\n  | RemoveBun\n  | ClearConstructor;\n","import { ingredientType } from '../types';\n\nexport const sortArray = (\n  array: ingredientType[],\n  from: number,\n  to: number\n) => {\n  const el = array.splice(from, 1)[0];\n  array.splice(to, 0, el);\n  return array;\n};\n\nexport const getToken = (res: Response) => {\n  let authToken;\n  res.headers.forEach((header) => {\n    if (header.indexOf('Bearer') === 0) {\n      authToken = header.split('Bearer ')[1];\n    }\n  });\n  return authToken;\n};\n","export enum ActionOrderTypes {\n  SET_ORDER = \"SET_ORDER\",\n  SET_LOADER = \"SET_LOADER\",\n}\n\ninterface setIsLoader {\n  type: ActionOrderTypes.SET_LOADER;\n  payload: boolean;\n}\ninterface setOrder {\n  type: ActionOrderTypes.SET_ORDER;\n  payload: number;\n}\n\nexport type OrderAction = setOrder | setIsLoader;\n","import {\n  ActionConstructorTypes,\n  ConstructorAction,\n} from '../actions/constructor/types';\n//Для ревьюера случайно сделал типизацию стора раньше времени. Если будут замечения по стору в следующем спринте поправлю.\nimport { sortArray } from '../../helpers';\nimport { ConstructorState } from '../../types';\nconst initialState: ConstructorState = {\n  burderConstructor: {\n    bun: [],\n    ingredients: [],\n  },\n  totalPrice: 0,\n};\n\nexport default function burgerReducer(\n  state = initialState,\n  action: ConstructorAction\n): ConstructorState {\n  switch (action.type) {\n    case ActionConstructorTypes.SET_BUN:\n      return {\n        ...state,\n        burderConstructor: {\n          ...state.burderConstructor,\n          bun: [...state.burderConstructor.bun, action.payload],\n        },\n      };\n    case ActionConstructorTypes.SET_INGREDIENT:\n      return {\n        ...state,\n        burderConstructor: {\n          ...state.burderConstructor,\n          ingredients: [...state.burderConstructor.ingredients, action.payload],\n        },\n      };\n    case ActionConstructorTypes.SORT_INGREDIENT:\n      const { index, atIndex } = action.payload;\n      return {\n        ...state,\n        burderConstructor: {\n          ...state.burderConstructor,\n          ingredients: sortArray(\n            [...state.burderConstructor.ingredients],\n            index,\n            atIndex\n          ),\n        },\n      };\n    case ActionConstructorTypes.SET_PRICE:\n      return { ...state, totalPrice: action.payload };\n    case ActionConstructorTypes.CLEAR_CONSTRUCTOR:\n      return {\n        ...state,\n        burderConstructor: {\n          bun: [],\n          ingredients: [],\n        },\n      };\n    case ActionConstructorTypes.REMOVE_BUN:\n      return {\n        ...state,\n        burderConstructor: {\n          ...state.burderConstructor,\n          bun: [],\n        },\n      };\n    case ActionConstructorTypes.REMOVE_INGREDIENT:\n      return {\n        ...state,\n        burderConstructor: {\n          ...state.burderConstructor,\n          ingredients: state.burderConstructor.ingredients.filter(\n            (x, idx) => idx !== action.payload\n          ),\n        },\n      };\n    default:\n      return state;\n  }\n}\n","import { ActionOrderTypes, OrderAction } from '../actions/order/types';\n//Для ревьюера случайно сделал типизацию стора раньше времени. Если будут замечения по стору в следующем спринте поправлю.\ninterface IState {\n  orderNumber: number;\n  loader: boolean;\n}\nconst initialState: IState = {\n  orderNumber: 0,\n  loader: false,\n};\n\nexport default function orderReducer(\n  state = initialState,\n  action: OrderAction\n): IState {\n  switch (action.type) {\n    case ActionOrderTypes.SET_ORDER:\n      return {\n        ...state,\n        orderNumber: action.payload,\n      };\n    case ActionOrderTypes.SET_LOADER:\n      return {\n        ...state,\n        loader: action.payload,\n      };\n    default:\n      return state;\n  }\n}\n","export enum ActionUserTypes {\n  SET_USER = \"SET_USER\",\n  SET_USERAUTH = \"SET_USERAUTH\",\n  SET_FORGOT_PASSWORD = \"SET_FORGOT_PASSWORD\",\n}\n\ninterface setUser {\n  type: ActionUserTypes.SET_USER;\n  payload: any;\n}\ninterface setUserAuth {\n  type: ActionUserTypes.SET_USERAUTH;\n  payload: boolean;\n}\ninterface setPassword {\n  type: ActionUserTypes.SET_FORGOT_PASSWORD;\n  payload: boolean;\n}\n\nexport type UserAction = setUser | setUserAuth | setPassword;\n","import { ActionUserTypes, UserAction } from '../actions/user/types';\n//Для ревьюера случайно сделал типизацию стора раньше времени. Если будут замечения по стору в следующем спринте поправлю.\ninterface IState {\n  user: any;\n  isForgotPasswordRequest: boolean;\n  isAuth: boolean;\n}\nconst initialState: IState = {\n  user: null,\n  isForgotPasswordRequest: false,\n  isAuth: false,\n};\n\nexport default function userReducer(\n  state = initialState,\n  action: UserAction\n): IState {\n  switch (action.type) {\n    case ActionUserTypes.SET_USER:\n      return { ...state, user: action.payload };\n    case ActionUserTypes.SET_USERAUTH:\n      return { ...state, isAuth: true };\n    case ActionUserTypes.SET_FORGOT_PASSWORD:\n      return { ...state, isForgotPasswordRequest: true };\n    default:\n      return state;\n  }\n}\n","import { Order } from '../../../types';\n\nexport enum ActionWSTypes {\n  WS_CONNECTION_SUCCESS = 'WS_CONNECTION_SUCCESS',\n  WS_CONNECTION_ERROR = 'WS_CONNECTION_ERROR',\n  WS_CONNECTION_CLOSED = 'WS_CONNECTION_CLOSED',\n  WS_GET_MESSAGE = 'WS_GET_MESSAGE',\n  WS_SEND_MESSAGE = 'WS_SEND_MESSAGE',\n  WS_CONNECTION_START = 'WS_CONNECTION_START',\n  WS_CONNECTION_STOP = 'WS_CONNECTION_STOP',\n}\n\ninterface wsConnectionStart {\n  type: ActionWSTypes.WS_CONNECTION_START;\n  payload: string;\n}\ninterface wsConnectionSuccess {\n  type: ActionWSTypes.WS_CONNECTION_SUCCESS;\n}\ninterface wsConnectionError {\n  type: ActionWSTypes.WS_CONNECTION_ERROR;\n}\ninterface wsConnectionClosed {\n  type: ActionWSTypes.WS_CONNECTION_CLOSED;\n}\ninterface wsConnectionStop {\n  type: ActionWSTypes.WS_CONNECTION_STOP;\n}\ninterface wsConnectionGetMessage {\n  type: ActionWSTypes.WS_GET_MESSAGE;\n  payload: { orders: Order[]; total: number; totalToday: number };\n}\ninterface wsConnectionSengMessage {\n  type: ActionWSTypes.WS_SEND_MESSAGE;\n  payload: string;\n}\n\nexport type wsActions =\n  | wsConnectionStart\n  | wsConnectionSuccess\n  | wsConnectionError\n  | wsConnectionClosed\n  | wsConnectionStop\n  | wsConnectionGetMessage\n  | wsConnectionSengMessage;\n","import { Order } from '../../types';\nimport { wsActions, ActionWSTypes } from '../actions/ws/types';\n\ninterface IState {\n  orders: Order[];\n  ordersUser: Order[];\n  loader: boolean;\n  total: number;\n  totalToday: number;\n  totalUser: number;\n  totalTodayUser: number;\n  wsConnected: boolean;\n  wsConnectionFailed: boolean;\n  wsConnectedUser: boolean;\n  wsConnectionFailedUser: boolean;\n}\nconst initialState: IState = {\n  orders: [],\n  ordersUser: [],\n  total: 0,\n  totalToday: 0,\n  totalUser: 0,\n  totalTodayUser: 0,\n  loader: false,\n  wsConnected: false,\n  wsConnectionFailed: false,\n  wsConnectedUser: false,\n  wsConnectionFailedUser: false,\n};\n\nexport default function orderReducer(\n  state = initialState,\n  action: wsActions\n): IState {\n  switch (action.type) {\n    case ActionWSTypes.WS_CONNECTION_START:\n      return {\n        ...state,\n      };\n    case ActionWSTypes.WS_CONNECTION_SUCCESS:\n      return {\n        ...state,\n        wsConnected: true,\n        wsConnectionFailed: false,\n      };\n    case ActionWSTypes.WS_GET_MESSAGE:\n      return {\n        ...state,\n        orders: action.payload.orders,\n        total: action.payload.total,\n        totalToday: action.payload.totalToday,\n      };\n    case ActionWSTypes.WS_CONNECTION_CLOSED:\n      return {\n        ...state,\n        wsConnected: false,\n        wsConnectionFailed: false,\n      };\n    case ActionWSTypes.WS_CONNECTION_STOP:\n      return {\n        ...state,\n        wsConnected: false,\n        wsConnectionFailed: false,\n      };\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from 'redux';\n//Для ревьюера случайно сделал типизацию стора раньше времени. Если будут замечения по стору в следующем спринте поправлю.\nimport ingredients from './ingredients';\nimport modal from './modal';\nimport burgerReducer from './constructor';\nimport order from './order';\nimport user from './user';\nimport feed from './feed';\nexport const rootReducer = combineReducers({\n  ingredientsState: ingredients,\n  burgerState: burgerReducer,\n  modalState: modal,\n  orderState: order,\n  userState: user,\n  feedState: feed,\n});\nexport type RootState = ReturnType<typeof rootReducer>;\n// const reducers = {\n//   ingredientsState: ingredients,\n//   burgerState: burgerReducer,\n//   modalState: modal,\n//   orderState: order,\n//   userState: user,\n// };\n// export default reducers;\n","import { Middleware, MiddlewareAPI } from 'redux';\nimport { ActionWSTypes } from '../services/actions/ws/types';\ntype wsActions = {\n  WS_CONNECTION_SUCCESS: string;\n  WS_CONNECTION_ERROR: string;\n  WS_CONNECTION_CLOSED: string;\n  WS_GET_MESSAGE: string;\n  WS_SEND_MESSAGE: string;\n  WS_CONNECTION_START: string;\n  WS_CONNECTION_STOP: string;\n};\nexport const socketMiddleware =\n  (wsActions: wsActions): Middleware =>\n  (store: MiddlewareAPI) => {\n    let socket: WebSocket | null = null;\n\n    return (next) => (action) => {\n      const { dispatch } = store;\n      const { type, payload } = action;\n      if (type === wsActions.WS_CONNECTION_START) {\n        socket = new WebSocket(payload);\n      }\n\n      if (type === wsActions.WS_CONNECTION_STOP && socket !== null) {\n        socket.close(1000, 'Page closed by user');\n      }\n\n      if (socket) {\n        socket.onopen = (event) => {\n          dispatch({\n            type: wsActions.WS_CONNECTION_SUCCESS,\n            payload: event,\n          });\n        };\n\n        socket.onerror = (event) => {\n          dispatch({\n            type: wsActions.WS_CONNECTION_ERROR,\n            payload: event,\n          });\n        };\n\n        socket.onmessage = (event) => {\n          const { data } = event;\n          if (data?.includes('ping')) {\n            if (socket !== null) {\n              socket.send('pong');\n            }\n          }\n          const { success, orders, total, totalToday } = JSON.parse(data);\n          if (success) {\n            dispatch({\n              type: wsActions.WS_GET_MESSAGE,\n              payload: {\n                orders,\n                total,\n                totalToday,\n              },\n            });\n          }\n        };\n\n        socket.onclose = (event) => {\n          dispatch({\n            type: wsActions.WS_CONNECTION_CLOSED,\n            payload: event,\n          });\n        };\n\n        if (type === wsActions.WS_SEND_MESSAGE) {\n          socket.send(JSON.stringify(payload));\n        }\n      }\n\n      next(action);\n    };\n  };\n","import { applyMiddleware, createStore, compose } from 'redux';\nimport thunk from 'redux-thunk';\nimport { rootReducer } from './reducers';\nimport { socketMiddleware } from '../middleware/socketMiddleware';\n// import { socketUserMiddleware } from '../middleware/socketUserMiddleware';\nimport { ActionWSTypes } from './actions/ws/types';\nimport { useDispatch } from 'react-redux';\n// const wsUrl = 'wss://norma.nomoreparties.space/orders/all';\n// const wsUserUrl = 'wss://norma.nomoreparties.space/orders';\n\ndeclare global {\n  interface Window {\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\n    // args: () => any;\n  }\n}\nconst socketObject = {\n  WS_CONNECTION_SUCCESS: ActionWSTypes.WS_CONNECTION_SUCCESS,\n  WS_CONNECTION_ERROR: ActionWSTypes.WS_CONNECTION_ERROR,\n  WS_CONNECTION_CLOSED: ActionWSTypes.WS_CONNECTION_CLOSED,\n  WS_GET_MESSAGE: ActionWSTypes.WS_GET_MESSAGE,\n  WS_SEND_MESSAGE: ActionWSTypes.WS_SEND_MESSAGE,\n  WS_CONNECTION_START: ActionWSTypes.WS_CONNECTION_START,\n  WS_CONNECTION_STOP: ActionWSTypes.WS_CONNECTION_STOP,\n};\nexport const store = createStore(\n  rootReducer,\n  applyMiddleware(thunk, socketMiddleware(socketObject))\n);\n\n//Для ревьюера тут нужен импорт useDispatch,\n//так как он используется в создании переменной useAppDispatch которая получается типизированная и используется в хуке useActions\n//хук useActions получается доступ ко всем диспатчамм и уще видит их как типизированные.\nexport type AppDispatch = typeof store.dispatch;\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\n","export const BASE_URL = \"https://norma.nomoreparties.space/api\";\n","import Cookies from 'js-cookie';\nimport { ingredientType } from '../types';\nimport { BASE_URL } from '../utils/constans';\n\ninterface ICheckResponse {\n  readonly headers: Headers;\n  readonly ok: boolean;\n  readonly redirected: boolean;\n  readonly status: number;\n  readonly statusText: string;\n  readonly trailer: Promise<Headers>;\n  readonly type: ResponseType;\n  readonly url: string;\n  clone(): Response;\n  json(): Response;\n  text(): Promise<string>;\n  success?: boolean;\n  name?: string;\n  order?: {\n    number: number;\n  };\n  accessToken?: string;\n  refreshToken?: string;\n  user?: {\n    email?: string;\n    name?: string;\n  };\n}\n\ninterface IRequest extends ICheckResponse {\n  data?: ingredientType[];\n}\n\nexport const fetchRequest = async (api: string): Promise<IRequest> => {\n    const url = `${BASE_URL}${api}`;\n    return await fetch(url).then(checkResponse);\n  },\n  fetchPost = async (api: string, body: any): Promise<ICheckResponse> => {\n    const url = `${BASE_URL}${api}`;\n    const headers = {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    };\n    if (Cookies.get('accessToken')) {\n      Object.assign(headers, { authorization: Cookies.get('accessToken') });\n    }\n    return await fetch(url, {\n      method: 'POST',\n      mode: 'cors',\n      cache: 'no-cache',\n      credentials: 'same-origin',\n      headers,\n      body: JSON.stringify({\n        ingredients: body,\n      }),\n    }).then(checkResponse);\n  },\n  post = async (\n    api: string,\n    body?: any,\n    token?: string\n  ): Promise<ICheckResponse> => {\n    const url = `${BASE_URL}${api}`;\n    const headers = {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    };\n    if (token !== '') {\n      Object.assign(headers, { authorization: token });\n    }\n    return await fetch(url, {\n      method: 'POST',\n      mode: 'cors',\n      cache: 'no-cache',\n      credentials: 'same-origin',\n      headers,\n      body: JSON.stringify(body),\n    }).then(checkResponse);\n  },\n  get = async (api: string): Promise<ICheckResponse> => {\n    const url = `${BASE_URL}${api}`;\n    const token = Cookies.get('accessToken') || null;\n    const headers = {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    };\n    if (token !== '') {\n      Object.assign(headers, { authorization: token });\n    }\n    return await fetch(url, {\n      method: 'GET',\n      mode: 'cors',\n      cache: 'no-cache',\n      credentials: 'same-origin',\n      headers,\n    }).then(checkResponseGET);\n  },\n  patch = async (api: string, body: any): Promise<ICheckResponse> => {\n    const url = `${BASE_URL}${api}`;\n    const token = Cookies.get('accessToken');\n    const headers = {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    };\n    if (token !== '') {\n      Object.assign(headers, { authorization: token });\n    }\n    return await fetch(url, {\n      method: 'PATCH',\n      mode: 'cors',\n      cache: 'no-cache',\n      credentials: 'same-origin',\n      headers,\n      body: JSON.stringify(body),\n    }).then(checkResponse);\n  };\n\nconst checkResponse = (res: Response) => {\n  if (res.ok) {\n    return res.json();\n  }\n\n  return Promise.reject(res.status);\n};\n\nconst checkResponseGET = (res: Response) => {\n  if (res.ok) {\n    return res.json();\n  }\n\n  return Promise.reject(res.text().then((text) => JSON.parse(text)));\n};\n","import { fetchPost } from '../../../api/index';\nimport { ActionOrderTypes, OrderAction } from './types';\nimport { ActionModalTypes, ModalAction } from '../modal/types';\nimport { ActionIngredientsTypes, IngredientAction } from '../ingredients/types';\nimport {\n  ActionConstructorTypes,\n  ConstructorAction,\n} from '../constructor/types';\nimport { Dispatch } from 'redux';\nexport const OrderActionCreators = {\n  getOrder:\n    (ingredientsData: string[]) =>\n    (\n      dispatch: Dispatch<\n        OrderAction | ModalAction | IngredientAction | ConstructorAction\n      >\n    ) => {\n      fetchPost('/orders', ingredientsData)\n        .then((response): void => {\n          const { success, order } = response;\n          if (success && order) {\n            dispatch({\n              type: ActionOrderTypes.SET_ORDER,\n              payload: order?.number,\n            });\n            dispatch({\n              type: ActionModalTypes.OPENMODAL,\n              payload: { modalIsOpen: true, mode: 'orderDetails' },\n            });\n            dispatch({ type: ActionConstructorTypes.CLEAR_CONSTRUCTOR });\n            dispatch({\n              type: ActionIngredientsTypes.CLEAR_INGREDIENTS_SELECTEDS,\n            });\n          }\n        })\n        .catch((err) => {\n          console.error('Не получилось оформить заказ');\n        })\n        .finally(() => {\n          dispatch({ type: ActionOrderTypes.SET_LOADER, payload: false });\n        });\n    },\n  setIsLoader: (flag: boolean): OrderAction => ({\n    type: ActionOrderTypes.SET_LOADER,\n    payload: flag,\n  }),\n};\n","import { v4 as uuidv4 } from 'uuid';\nimport { ingredientType } from '../../../types';\nimport { ConstructorAction, ActionConstructorTypes } from './types';\n\nexport const ConstructorActionCreators = {\n  setBun: (obj: ingredientType): ConstructorAction => {\n    const uuid = uuidv4();\n    const objClone = { ...obj };\n    const objNew = Object.assign(objClone, { uuid });\n    return {\n      type: ActionConstructorTypes.SET_BUN,\n      payload: objNew,\n    };\n  },\n  // ({\n  //   type: ActionConstructorTypes.SET_BUN,\n  //   payload: obj,\n  // }),\n  setIngredient: (obj: ingredientType): ConstructorAction => {\n    const uuid = uuidv4();\n    const objClone = { ...obj };\n    const objNew = Object.assign(objClone, { uuid });\n    return { type: ActionConstructorTypes.SET_INGREDIENT, payload: objNew };\n  },\n  setPrice: (price: number): ConstructorAction => ({\n    type: ActionConstructorTypes.SET_PRICE,\n    payload: price,\n  }),\n  sortIngredientActions: (obj: {\n    index: number;\n    atIndex: number;\n  }): ConstructorAction => ({\n    type: ActionConstructorTypes.SORT_INGREDIENT,\n    payload: obj,\n  }),\n  removeIngredient: (index: number): ConstructorAction => ({\n    type: ActionConstructorTypes.REMOVE_INGREDIENT,\n    payload: index,\n  }),\n  removeBun: (): ConstructorAction => ({\n    type: ActionConstructorTypes.REMOVE_BUN,\n  }),\n};\n","import { fetchRequest } from '../../../api/index';\nimport { ingredientType } from '../../../types';\nimport { ActionIngredientsTypes, IngredientAction } from './types';\nimport { Dispatch } from 'redux';\n\nexport const IngredientsActionCreators = {\n  getIngredients: () => (dispatch: Dispatch<IngredientAction>) => {\n    fetchRequest('/ingredients')\n      .then((response) => {\n        const { data, success } = response;\n        if (success && data) {\n          dispatch({\n            type: ActionIngredientsTypes.INGREDIENTS_FETCH,\n            payload: data || [],\n          });\n        } else {\n          dispatch({\n            type: ActionIngredientsTypes.INGREDIENTS_FETCH,\n            payload: [],\n          });\n        }\n      })\n      .catch((error) => {\n        dispatch({\n          type: ActionIngredientsTypes.INGREDIENTS_ERROR,\n          payload: true,\n        });\n      });\n  },\n  setIngredientSelected: (ingredient: ingredientType) => ({\n    type: ActionIngredientsTypes.INGREDIENTS_SELECTED,\n    payload: ingredient,\n  }),\n};\n","import { ActionModalTypes, ModalAction } from \"./types\";\nexport const ModalActionCreators = {\n  openModalAction: (obj: {\n    modalIsOpen: boolean;\n    mode: string;\n  }): ModalAction => ({\n    type: ActionModalTypes.OPENMODAL,\n    payload: obj,\n  }),\n  closeModalAction: (): ModalAction => ({ type: ActionModalTypes.CLOSEMODAL }),\n};\n","import Cookies from 'js-cookie';\nimport { post, get, patch } from '../../../api';\nimport { ActionUserTypes, UserAction } from './types';\nimport { Dispatch } from 'redux';\nexport const UserActionsCreator = {\n  updateToken: async () => {\n    const payload = {\n      token: Cookies.get('refreshToken'),\n    };\n    return await post('/auth/token', payload).then((res: any) => {\n      if (res.success) {\n        const time = new Date(new Date().getTime() + 20 * 60 * 1000);\n        Cookies.set('accessToken', res.accessToken, {\n          expires: time,\n        });\n        Cookies.set('refreshToken', res.refreshToken);\n        return true;\n      }\n      return false;\n    });\n  },\n  logoutUser: async () => {\n    const payload = {\n      token: Cookies.get('refreshToken'),\n    };\n    return await post('/auth/logout', payload).then((res) => {\n      if (res.success) {\n        Cookies.remove('accessToken');\n        Cookies.remove('refreshToken');\n        return true;\n      }\n      return false;\n    });\n  },\n  forgotPassword: (form: { email: string }) => {\n    return async (dispatch: Dispatch<UserAction>): Promise<boolean> => {\n      try {\n        return post('/password-reset', form).then((res) => {\n          if (res.success) {\n            dispatch({\n              type: ActionUserTypes.SET_FORGOT_PASSWORD,\n              payload: true,\n            });\n            return true;\n          }\n          return false;\n        });\n      } catch (e) {\n        return false;\n      }\n    };\n  },\n  resetPassword: async (form: {\n    password: string;\n    token: string;\n    code: string;\n  }): Promise<{ success: boolean }> => {\n    return await post('password-reset/reset', form).then((res: any) => {\n      if (res.success) {\n        return { success: true };\n      } else {\n        return { success: false };\n      }\n    });\n  },\n  register:\n    (form: { name: string; email: string; password: string }) =>\n    (dispatch: Dispatch<UserAction>): Promise<boolean> => {\n      return post('/auth/register', form).then((res: any) => {\n        if (res.success) {\n          Cookies.set('accessToken', res.accessToken);\n          Cookies.set('refreshToken', res.refreshToken);\n          dispatch({ type: ActionUserTypes.SET_USER, payload: res.user });\n          return true;\n        }\n        return false;\n      });\n    },\n  login:\n    (form: { email: string; password: string }) =>\n    async (dispatch: Dispatch<UserAction>) => {\n      const res = await post('/auth/login', form);\n      if (res.success) {\n        const time = new Date(new Date().getTime() + 20 * 60 * 1000);\n        if (res && res.accessToken && res.refreshToken) {\n          Cookies.set('accessToken', res.accessToken, {\n            expires: time,\n          });\n          Cookies.set('refreshToken', res.refreshToken);\n        }\n        dispatch({ type: ActionUserTypes.SET_USER, payload: res.user });\n        dispatch({ type: ActionUserTypes.SET_USERAUTH, payload: true });\n        return true;\n      } else {\n        return false;\n      }\n    },\n  changeUserData:\n    (form: { name: string; email: string; password: string }) =>\n    async (dispatch: Dispatch<UserAction>): Promise<boolean> => {\n      if (!Cookies.get('accessToken')) {\n        const resToken = await UserActionsCreator.updateToken();\n      }\n      const response = await patch('/auth/user', form);\n      if (response && response.success) {\n        dispatch({ type: ActionUserTypes.SET_USER, payload: response.user });\n        return true;\n      } else {\n        return false;\n      }\n    },\n  getUser: (): Promise<{\n    success: boolean;\n    user?: { email: string; name: string };\n  }> => {\n    return get('/auth/user')\n      .then((response: any) => {\n        return response;\n      })\n      .catch((error) => {\n        return error;\n      });\n  },\n  getUserInformation: () => async (dispatch: Dispatch<UserAction>) => {\n    if (!Cookies.get('accessToken')) {\n      await UserActionsCreator.updateToken();\n    }\n    const resposnse = await UserActionsCreator.getUser();\n    if (resposnse && resposnse.success) {\n      dispatch({ type: ActionUserTypes.SET_USER, payload: resposnse.user });\n\n      return resposnse;\n    } else {\n      return { success: false };\n    }\n  },\n  setUserAuth: (payload: boolean) => (dispatch: Dispatch<UserAction>) => {\n    dispatch({ type: ActionUserTypes.SET_USERAUTH, payload: true });\n  },\n};\n","import { ActionWSTypes, wsActions } from './types';\n\nexport const WS = {\n  wsConnectionSuccess: (): wsActions => ({\n    type: ActionWSTypes.WS_CONNECTION_SUCCESS,\n  }),\n  wsConnectionStart: (payload: string): wsActions => ({\n    type: ActionWSTypes.WS_CONNECTION_START,\n    payload: payload,\n  }),\n  wsConnectionError: (): wsActions => ({\n    type: ActionWSTypes.WS_CONNECTION_ERROR,\n  }),\n  wsConnectionClosed: (): wsActions => ({\n    type: ActionWSTypes.WS_CONNECTION_CLOSED,\n  }),\n  wsConnectionGetMessage: (payload: any): wsActions => ({\n    type: ActionWSTypes.WS_GET_MESSAGE,\n    payload: payload,\n  }),\n  wsConnectionSengMessage: (payload: string): wsActions => ({\n    type: ActionWSTypes.WS_SEND_MESSAGE,\n    payload: payload,\n  }),\n  wsConnectionStop: (): wsActions => ({\n    type: ActionWSTypes.WS_CONNECTION_STOP,\n  }),\n};\n","import { OrderActionCreators } from './order/order-actions';\nimport { ConstructorActionCreators } from './constructor/constructor-actions';\nimport { IngredientsActionCreators } from './ingredients/ingredients-actions';\nimport { ModalActionCreators } from './modal/modal-actions';\nimport { UserActionsCreator } from './user/user-actions';\nimport { WS } from './ws/ws-actions';\nexport const allActionCreators = {\n  ...OrderActionCreators,\n  ...ConstructorActionCreators,\n  ...IngredientsActionCreators,\n  ...ModalActionCreators,\n  ...UserActionsCreator,\n  ...WS,\n};\n","import React, { useMemo } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { useAppDispatch } from '../services';\nimport { allActionCreators } from '../services/actions/index';\n\nexport const useActions = () => {\n  const dispatch = useAppDispatch();\n  const bindActions = useMemo(() => {\n    return bindActionCreators(allActionCreators, dispatch);\n  }, [dispatch]);\n  return bindActions;\n};\n","import React from 'react';\nimport classNames from 'classnames/bind';\nimport styles from './AppMenuItem.module.css';\ninterface IAppMenuItem {\n  title: string;\n  Icon: JSX.Element;\n  onClick: () => void;\n  isActive?: boolean | null;\n}\nfunction AppMenuItem({ title, Icon, onClick, isActive }: IAppMenuItem) {\n  return (\n    <li\n      className={classNames(styles.headerMenuItem, 'pt-4 pb-4 pl-5 pr-5')}\n      onClick={onClick}\n    >\n      <div className={classNames(styles.headerMenuItemIcon, 'mr-2')}>\n        {Icon}\n      </div>\n      <span className=\"text text_type_main-default\">{title}</span>\n    </li>\n  );\n}\n\nexport default AppMenuItem;\n","import React from 'react';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\nimport {\n  Logo,\n  ProfileIcon,\n  ListIcon,\n  BurgerIcon,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport styles from './AppHeader.module.css';\nimport AppMenuItem from '../AppMenuItem/AppMenuItem';\nfunction AppHeader() {\n  const history = useHistory();\n  const mainPage = useRouteMatch('/');\n  const feedPage = useRouteMatch('/feed');\n  const profilePage = useRouteMatch('/profile');\n  const mainPageActive = mainPage && mainPage.isExact;\n  const feedPageActive = feedPage && feedPage.isExact;\n  const profilePageActive = profilePage && profilePage.isExact;\n  return (\n    <header className={`${styles.header} pt-4 pb-4`}>\n      <div className=\"container\">\n        <nav className={styles.headerWrap}>\n          <ul className={styles.headerMenuList}>\n            <AppMenuItem\n              title=\"Конструктор\"\n              Icon={<BurgerIcon type=\"primary\" />}\n              onClick={() => {\n                history.push({\n                  pathname: '/',\n                });\n              }}\n              isActive={mainPageActive}\n            />\n            <AppMenuItem\n              title=\"Лента заказов\"\n              Icon={<ListIcon type=\"primary\" />}\n              onClick={() => {\n                history.push({\n                  pathname: '/feed',\n                });\n              }}\n              isActive={feedPageActive}\n            />\n          </ul>\n          <div className={styles.headerLogo}>\n            <Logo />\n          </div>\n          <AppMenuItem\n            title=\"Личный кабинет\"\n            Icon={<ProfileIcon type=\"primary\" />}\n            onClick={() => {\n              history.push({\n                pathname: '/profile',\n              });\n            }}\n            isActive={profilePageActive}\n          />\n        </nav>\n      </div>\n    </header>\n  );\n}\n\nexport default AppHeader;\n","import { TypedUseSelectorHook, useSelector } from 'react-redux';\nimport { RootState } from '../services/reducers';\n\nexport const useTypedSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport { useDrag } from 'react-dnd';\nimport { useActions } from '../../hooks/useActions';\nimport {\n  Counter,\n  CurrencyIcon,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport classNames from 'classnames/bind';\nimport { ingredientType } from '../../types/index';\nimport styles from './BurgerIngredient.module.css';\ninterface IComponent {\n  ingredient: ingredientType;\n}\ndeclare module 'react' {\n  interface FunctionComponent<P = {}> {\n    (props: PropsWithChildren<P>, context?: any): ReactElement<any, any> | null;\n  }\n}\nexport default function BurgerIngredient({ ingredient }: IComponent) {\n  const location = useLocation();\n  const { setIngredientSelected, openModalAction } = useActions();\n  const [{ opacity }, dragIngredient] = useDrag({\n    type: 'ingredient-card',\n    // item: { id: ingredient._id },\n    item: { uuid: ingredient._id },\n    collect: (monitor) => ({\n      opacity: monitor.isDragging() ? 0.5 : 1,\n    }),\n  });\n  const openModal = () => {\n    setIngredientSelected(ingredient);\n    openModalAction({ modalIsOpen: true, mode: 'IngredientDetails' });\n  };\n  return (\n    <>\n      <div\n        className={classNames(styles.burgerItem, 'mb-8')}\n        onClick={openModal}\n        ref={dragIngredient}\n        style={{ opacity }}\n      >\n        <Link\n          className={styles.burgerItemlink}\n          to={{\n            pathname: `/ingredients/${ingredient._id}`,\n            state: { background: location },\n          }}\n        >\n          <div className=\"pl-4 pr-4\">\n            {ingredient.__v > 0 && (\n              <Counter count={ingredient.__v} size=\"default\" />\n            )}\n\n            <img src={ingredient.image} alt=\"\" className=\"mb-1\" />\n            <div className={classNames(styles.burderItemPrice, 'mb-1')}>\n              <span className=\"text text_type_main-medium\">\n                {ingredient.price}\n              </span>\n              <CurrencyIcon type=\"primary\" />\n            </div>\n            <div className=\"burgerTitle text text_type_main-default\">\n              {ingredient.name}\n            </div>\n          </div>\n        </Link>\n      </div>\n    </>\n  );\n}\n","import React from 'react';\nimport BurgerIngredient from '../BurgerIngredient/BurgerIngredient';\nimport styles from './BurgerIngredientSection.module.css';\nimport classNames from 'classnames/bind';\nimport { ingredientType } from '../../types/index';\n\ninterface IComponent {\n  title: string;\n  ingredients: ingredientType[];\n  bunsRef: React.Ref<HTMLDivElement>;\n  saucesRef: React.Ref<HTMLDivElement>;\n  mainsRef: React.Ref<HTMLDivElement>;\n}\nfunction BurgerIngredientSection({\n  title,\n  ingredients,\n  bunsRef,\n  saucesRef,\n  mainsRef,\n}: IComponent) {\n  const refs = () => {\n    if (title === 'Булки') {\n      return bunsRef;\n    } else if (title === 'Соусы') {\n      return saucesRef;\n    } else {\n      return mainsRef;\n    }\n  };\n\n  return (\n    <div\n      className={classNames(styles.burgerIngredientSection, 'mt-10')}\n      ref={refs()}\n    >\n      <div className=\"title text text_type_main-medium mb-6\">{title}</div>\n      {ingredients &&\n        ingredients.map((ingredient, idx) => (\n          <BurgerIngredient\n            key={`${ingredient._id}_${idx}`}\n            ingredient={ingredient}\n          />\n        ))}\n    </div>\n  );\n}\n\nexport default BurgerIngredientSection;\n","import React, { useState, useRef } from 'react';\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { useTypedSelector } from '../../hooks/useTypedSelector';\nimport classNames from 'classnames/bind';\nimport styles from './BurgerIngredients.module.css';\nimport BurgerIngredientSection from '../BurgerIngredientSection/BurgerIngredientSection';\nimport { ingredientType } from '../../types';\n\nexport interface ITypesIngredientObject {\n  [index: string]: ingredientType[];\n}\n\ninterface ITEIngredientObject {\n  bun: 'Булки';\n  sauce: 'Соусы';\n  main: 'Начинки';\n}\n\nfunction BurgerIngredients() {\n  const { ingredients } = useTypedSelector((state) => state.ingredientsState);\n  const ingredientTypeTitles: ITEIngredientObject = {\n    bun: 'Булки',\n    sauce: 'Соусы',\n    main: 'Начинки',\n  };\n\n  const scrollRef = useRef<HTMLDivElement>(null);\n  const bunsRef = useRef<HTMLDivElement>(null);\n  const saucesRef = useRef<HTMLDivElement>(null);\n  const mainsRef = useRef<HTMLDivElement>(null);\n\n  const [current, setCurrent] = useState<string>('bun');\n  const sortItems: ingredientType[] = ingredients.sort((a, b) => {\n    if (a.type === 'bun' && b.type !== 'bun') {\n      return -1;\n    } else if (a.type === 'sauce' && b.type !== 'sauce') {\n      return -1;\n    } else {\n      return 0;\n    }\n  });\n\n  const typesIngredient: ITypesIngredientObject = {};\n\n  sortItems.forEach((item) => {\n    const { type } = item;\n    if (!typesIngredient[type]) {\n      typesIngredient[type] = [];\n    }\n    typesIngredient[type].push(item);\n  });\n\n  const handleScroll = () => {\n    const hasCurrent =\n      scrollRef.current &&\n      bunsRef.current &&\n      saucesRef.current &&\n      mainsRef.current;\n    if (hasCurrent) {\n      const scrollContainerPosition =\n        scrollRef.current.getBoundingClientRect().top;\n\n      const bunHeaderPosition = bunsRef?.current.getBoundingClientRect().top;\n      const sauceHeaderPosition =\n        saucesRef?.current.getBoundingClientRect().top;\n      const mainHeaderPosition = mainsRef?.current.getBoundingClientRect().top;\n\n      const bunsDiff = Math.abs(scrollContainerPosition - bunHeaderPosition);\n      const saucesDiff = Math.abs(\n        scrollContainerPosition - sauceHeaderPosition\n      );\n      const mainsDiff = Math.abs(scrollContainerPosition - mainHeaderPosition);\n      if (bunsDiff < saucesDiff) {\n        setCurrent('bun');\n      } else if (saucesDiff < mainsDiff) {\n        setCurrent('sauce');\n      } else {\n        setCurrent('main');\n      }\n    }\n  };\n\n  return (\n    <div className=\"col\">\n      <div className=\"flex\">\n        {ingredientTypeTitles &&\n          Object.keys(ingredientTypeTitles).map((type) => (\n            <Tab\n              key={type}\n              active={current === type}\n              onClick={setCurrent}\n              value={type}\n            >\n              {/* {ingredientTypeTitles[type]}\n               */}\n              {(ingredientTypeTitles as any)[type]}\n            </Tab>\n          ))}\n      </div>\n      <div\n        className={classNames(styles.burgerItems, 'customScroll')}\n        ref={scrollRef}\n        onScroll={handleScroll}\n      >\n        {typesIngredient &&\n          Object.keys(typesIngredient).map((ingredient, index) => (\n            <BurgerIngredientSection\n              key={ingredient}\n              // title={ingredientTypeTitles[ingredient]}\n              title={(ingredientTypeTitles as any)[ingredient]}\n              ingredients={typesIngredient[ingredient]}\n              bunsRef={bunsRef}\n              saucesRef={saucesRef}\n              mainsRef={mainsRef}\n            />\n          ))}\n      </div>\n    </div>\n  );\n}\n\nexport default BurgerIngredients;\n","import React, { FC, useRef } from 'react';\nimport { useDrag, useDrop } from 'react-dnd';\nimport debounce from 'lodash.debounce';\nimport { ingredientType } from '../../types';\nimport styles from '../BurgerConstructor/BurgerConstructor.module.css';\n\ninterface IBurgerConstructorItem {\n  children?: React.ReactNode;\n  uuid: string;\n  ingredientsIndex: number;\n  findIngredient: (uuid: string) => {\n    index: number;\n    findItem: ingredientType;\n  };\n  sortIngredient: (ingredientsIndex: number, droppedIndex: number) => void;\n}\n\nconst BurgerConstructorItem: FC<IBurgerConstructorItem> = ({\n  children,\n  uuid,\n  ingredientsIndex,\n  findIngredient,\n  sortIngredient,\n}) => {\n  const originalIndex = findIngredient(uuid).index;\n  const [{ isDragging }, drag] = useDrag(\n    () => ({\n      type: 'ingredients-sort',\n      item: { uuid, originalIndex },\n      collect: (monitor) => ({\n        isDragging: monitor.isDragging(),\n      }),\n      end: (item, monitor) => {\n        const { uuid: droppedId, originalIndex } = item;\n        const didDrop = monitor.didDrop();\n        if (!didDrop) {\n          const drooppedIndex = findIngredient(droppedId).index;\n          sortIngredient(drooppedIndex, originalIndex);\n        }\n      },\n    }),\n    [uuid, originalIndex, sortIngredient]\n  );\n  const [, drop] = useDrop(\n    () => ({\n      accept: 'ingredients-sort',\n      hover(ingredient: ingredientType) {\n        const { uuid: draggedId } = ingredient;\n\n        if (draggedId !== uuid) {\n          const { index: overIndex } = findIngredient(uuid);\n          const draggedIndex = findIngredient(draggedId).index;\n          sortIngredient(draggedIndex, overIndex);\n        }\n      },\n    }),\n    [findIngredient, sortIngredient]\n  );\n\n  const opacity = isDragging ? 0 : 1;\n  return (\n    <div\n      ref={(item) => drag(drop(item))}\n      className={styles.burgerCard}\n      style={{ opacity }}\n    >\n      {children}\n    </div>\n  );\n};\n\nexport default BurgerConstructorItem;\n","import React from \"react\";\nimport styles from \"./loader.module.css\";\nfunction Loader() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      viewBox=\"0 0 100 100\"\n      className={styles.icon}\n    >\n      <circle\n        cx=\"50\"\n        cy=\"50\"\n        r=\"37\"\n        stroke=\"white\"\n        strokeWidth=\"12\"\n        strokeLinecap=\"round\"\n        fill=\"none\"\n        strokeDasharray=\"40 192\"\n        strokeDashoffset=\"0\"\n      >\n        <animate\n          attributeName=\"stroke-dasharray\"\n          repeatCount=\"indefinite\"\n          dur=\"1.2s\"\n          values=\"14 218;160 72;14 218\"\n          keyTimes=\"0;0.5;1\"\n        ></animate>\n        <animate\n          attributeName=\"stroke-dashoffset\"\n          repeatCount=\"indefinite\"\n          dur=\"1.2s\"\n          from=\"0\"\n          to=\"-464\"\n        ></animate>\n      </circle>\n    </svg>\n  );\n}\n\nexport default Loader;\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useTypedSelector } from '../../hooks/useTypedSelector';\nimport { useDrop } from 'react-dnd';\nimport { useActions } from '../../hooks/useActions';\nimport {\n  ConstructorElement,\n  DragIcon,\n  CurrencyIcon,\n  Button,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport BurgerConstructorItem from '../BurgerConstructorItem/BurgerConstructorItem';\nimport Loader from '../Icons/Loader';\nimport styles from './BurgerConstructor.module.css';\nimport classNames from 'classnames/bind';\nimport { ingredientType } from '../../types';\n\ninterface IBurgerCards {\n  onDropHandler: (itemId: { uuid: string }) => void;\n}\n\nexport default function BurgerCards({ onDropHandler }: IBurgerCards) {\n  const history = useHistory();\n  const {\n    setPrice,\n    removeIngredient,\n    sortIngredientActions,\n    getOrder,\n    setIsLoader,\n  } = useActions();\n  const { burderConstructor, totalPrice } = useTypedSelector(\n    (state) => state.burgerState\n  );\n  const { ingredients: ingredientsState } = useTypedSelector(\n    (state) => state.ingredientsState\n  );\n  const { isAuth } = useTypedSelector((state) => state.userState);\n  const { loader } = useTypedSelector((state) => state.orderState);\n  const [hasDisabled, setHasDisabled] = useState<boolean>(false);\n  const { bun, ingredients } = burderConstructor;\n  const bunItem = bun?.[0];\n\n  const [, dropIngredientCard] = useDrop({\n    accept: 'ingredient-card',\n    drop(itemId: { uuid: string }) {\n      onDropHandler(itemId);\n    },\n  });\n  const [, dropIngredient] = useDrop({ accept: 'ingredients-sort' });\n  useEffect(() => {\n    const bunPrice = bun[0]?.price * 2 || 0;\n    const ingredientsPrices = ingredients?.reduce(\n      (acc, val) => acc + val.price,\n      0\n    );\n    setPrice(bunPrice + ingredientsPrices);\n    if (!bunItem) {\n      setHasDisabled(true);\n    } else {\n      setHasDisabled(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [bun, ingredients, bunItem]);\n  // }, [bun, ingredients, dispatch, bunItem]);\n\n  const handlerName = (name: string, type: string | undefined) => {\n    if (type) {\n      if (type === 'top') {\n        return `${name} (верх)`;\n      } else {\n        return `${name} (низ)`;\n      }\n    }\n    return name;\n  };\n\n  const removeItem = (item: ingredientType, index: number) => {\n    const findItem = ingredientsState.find((x) => x._id === item._id);\n    if (findItem && findItem.__v > 0) {\n      findItem.__v = findItem.__v - 1;\n    }\n    removeIngredient(index);\n  };\n\n  const orderAdd = async () => {\n    setIsLoader(true);\n    if (!isAuth) {\n      history.push('/login');\n      setIsLoader(false);\n    }\n    if (isAuth) {\n      const bunId = bunItem._id;\n      const ingredientsId = ingredients.map((x) => x._id);\n      const ingredientsData = [bunId, ...ingredientsId, bunId];\n      await getOrder(ingredientsData);\n    }\n  };\n\n  const findIngredient = useCallback(\n    (uuid: string) => {\n      // const findItem = ingredients.find((x) => x._id === id);\n      const findItem = ingredients.filter((i) => i.uuid === uuid)[0];\n      // if (findItem) {\n      return {\n        findItem,\n        index: ingredients.indexOf(findItem),\n      };\n      // }\n    },\n    [ingredients]\n  );\n  // const findIngredient = useCallback(\n  //   (id: string): { findItem: ingredientType; index: number } => {\n  //     // if (id) {\n  //     const findItem: ingredientType = ingredients.filter(\n  //       (x) => x._id === id\n  //     )[0];\n  //     return {\n  //       findItem,\n  //       index: ingredients.indexOf(findItem),\n  //     };\n  //     // if (findItem) {\n  //     //   return {\n  //     //     findItem,\n  //     //     index: ingredients.indexOf(findItem),\n  //     //   };\n  //     // }\n  //     // }\n  //   },\n  //   [ingredients]\n  // );\n  const sortIngredient = useCallback(\n    (index, atIndex) => {\n      sortIngredientActions({ index, atIndex });\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n  return (\n    <>\n      <div className=\"col\">\n        <div className={styles.burgerCards}>\n          <div\n            className={styles.BurgerConstructorsWrapper}\n            ref={dropIngredientCard}\n          >\n            {bunItem && (\n              <div className={classNames(styles.burgerCard, 'pr-4')}>\n                <ConstructorElement\n                  type=\"top\"\n                  isLocked={true}\n                  text={handlerName(bunItem.name, 'top')}\n                  price={bunItem.price}\n                  thumbnail={bunItem.image}\n                />\n              </div>\n            )}\n            <div\n              ref={dropIngredient}\n              className={classNames(\n                styles.burgerWrapper,\n                'customScroll',\n                'pr-2'\n              )}\n            >\n              {ingredients &&\n                ingredients.map((item, index) => {\n                  return (\n                    <BurgerConstructorItem\n                      key={item.uuid}\n                      uuid={item.uuid}\n                      ingredientsIndex={index}\n                      findIngredient={findIngredient}\n                      sortIngredient={sortIngredient}\n                    >\n                      <div className={styles.burderCardIcon}>\n                        <DragIcon type=\"primary\" />\n                      </div>\n                      <ConstructorElement\n                        type={item.position}\n                        isLocked={item.locker}\n                        text={handlerName(item.name, item.position)}\n                        price={item.price}\n                        thumbnail={item.image}\n                        handleClose={() => removeItem(item, index)}\n                      />\n                    </BurgerConstructorItem>\n                  );\n                })}\n            </div>\n            {bunItem && (\n              <div className={classNames(styles.burgerCard, 'pr-4')}>\n                <ConstructorElement\n                  type=\"bottom\"\n                  isLocked={true}\n                  text={handlerName(bunItem.name, 'bottom')}\n                  price={bunItem.price}\n                  thumbnail={bunItem.image}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n        <div className={classNames(styles.burgerTotalPrice, 'mt-10 mr-4')}>\n          <div\n            className={classNames(\n              styles.price,\n              'text text_type_digits-medium mr-10'\n            )}\n          >\n            <span>{totalPrice}</span>\n            <CurrencyIcon type=\"primary\" />\n          </div>\n          <div className={styles.button_wrapper}>\n            <Button\n              type=\"primary\"\n              size=\"medium\"\n              onClick={orderAdd}\n              disabled={hasDisabled}\n            >\n              {loader ? <Loader /> : 'Оформить заказ'}\n            </Button>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n","import React from 'react';\nimport { useTypedSelector } from '../../hooks/useTypedSelector';\nimport { useActions } from '../../hooks/useActions';\nimport BurgerIngredients from '../BurgerIngredients/BurgerIngredients';\nimport BurgerConstructor from '../BurgerConstructor/BurgerConstructor';\nexport default function Main() {\n  const { setBun, setIngredient, removeBun } = useActions();\n  const { ingredients } = useTypedSelector((state) => state.ingredientsState);\n  const { burderConstructor } = useTypedSelector((state) => state.burgerState);\n  const { bun } = burderConstructor;\n  const handleDrop = (itemId: { uuid: string }) => {\n    const item = ingredients.find((x) => x._id === itemId.uuid);\n\n    if (item) {\n      if (bun.length === 1 && item.type === 'bun') {\n        bun[0].__v = 0;\n        removeBun();\n      }\n      item.__v = item.__v + 1;\n      if (item.type === 'bun') {\n        setBun(item);\n      } else {\n        setIngredient(item);\n      }\n    }\n  };\n  return (\n    <div className=\"container mb-10\">\n      <h1 className=\"text text_type_main-large mt-10 mb-5 title\">\n        Соберите бургер\n      </h1>\n      <div className=\"row\">\n        <BurgerIngredients />\n        <BurgerConstructor onDropHandler={handleDrop} />\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport styles from \"./modalOverlay.module.css\";\nfunction ModalOverlay() {\n  return <div className={styles.modalOverlay}></div>;\n}\n\nexport default ModalOverlay;\n","import React, { useEffect, useRef, FC } from 'react';\nimport ReactDOM from 'react-dom';\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport ModalOverlay from './ModalOverlay';\nimport classNames from 'classnames/bind';\n// import { useHiddenScrollBody } from '../../hooks/useHiddenScrollBody';\nimport styles from './modal.module.css';\ninterface IModal {\n  show: boolean;\n  children?: React.ReactNode;\n  onClose: () => void;\n}\nconst Modal: FC<IModal> = ({ show, children, onClose }) => {\n  const target: any = document.getElementById('modals');\n  const overlayRef = useRef<HTMLDivElement>(null);\n  // useHiddenScrollBody(show);\n  const closeOnEsc = (e: KeyboardEvent) => {\n    if (e.key === 'Escape') {\n      onClose();\n    }\n  };\n\n  const onOutside = (event: Event) => {\n    if (\n      show &&\n      overlayRef.current &&\n      !overlayRef.current.contains(event.target as Node)\n    ) {\n      onClose();\n    }\n  };\n\n  useEffect(() => {\n    document.body.addEventListener('keydown', closeOnEsc);\n    return () => {\n      document.body.removeEventListener('keydown', closeOnEsc);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    document.addEventListener('mousedown', onOutside);\n    document.addEventListener('touchstart', onOutside);\n    return () => {\n      document.removeEventListener('mousedown', onOutside);\n      document.removeEventListener('touchstart', onOutside);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [show, overlayRef]);\n\n  useEffect(() => {\n    if (show) {\n      document.body.style.overflow = 'hidden';\n    }\n    return () => {\n      document.body.style.overflow = 'unset';\n    };\n  }, [show]);\n\n  if (show) {\n    return (\n      // show &&\n      ReactDOM.createPortal(\n        <div className=\"modalTarget\">\n          <ModalOverlay />\n          <div\n            ref={overlayRef}\n            className={classNames(styles.modal, 'pt-15 pb-15 pr-10 pl-10')}\n          >\n            <button\n              type=\"button\"\n              className={styles.modalCloseButton}\n              onClick={onClose}\n            >\n              <CloseIcon type=\"primary\" />\n            </button>\n            {children}\n          </div>\n        </div>,\n        target\n      )\n    );\n  } else {\n    return null;\n  }\n};\n\nexport default Modal;\n","import React from \"react\";\n\nfunction IconSuccess() {\n  return (\n    <svg\n      width=\"107\"\n      height=\"102\"\n      viewBox=\"0 0 107 102\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M8.36637 37.3873C2.54454 45.5044 2.54455 56.4957 8.36637 64.6127L28.3336 92.4518C34.1554 100.569 44.4748 103.965 53.8947 100.865L86.2023 90.2313C95.6223 87.1309 102 78.2387 102 68.2055V33.7945C102 23.7612 95.6222 14.8691 86.2023 11.7687L53.8947 1.13508C44.4748 -1.96536 34.1554 1.43114 28.3336 9.54819L8.36637 37.3873Z\"\n        fill=\"url(#paint0_radial_311_23)\"\n        fillOpacity=\"0.25\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M103.944 39.453C108.019 46.5983 108.019 55.4017 103.944 62.547L88.5996 89.453C84.5247 96.5983 76.994 101 68.8442 101H38.1558C30.006 101 22.4753 96.5983 18.4004 89.453L3.05617 62.547C-1.01872 55.4017 -1.01872 46.5983 3.05617 39.453L18.4004 12.547C22.4753 5.40169 30.006 1 38.1558 1L68.8442 1C76.994 1 84.5247 5.40169 88.5996 12.547L103.944 39.453Z\"\n        fill=\"url(#paint1_radial_311_23)\"\n        fillOpacity=\"0.25\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M43.9249 20.9109C49.3362 17.0297 56.6638 17.0297 62.0751 20.9109L80.6345 34.2224C86.0459 38.1036 88.3102 44.9832 86.2433 51.2632L79.1542 72.8016C77.0873 79.0815 71.1592 83.3333 64.4703 83.3333H41.5296C34.8408 83.3333 28.9127 79.0815 26.8458 72.8016L19.7567 51.2632C17.6898 44.9832 19.9541 38.1036 25.3655 34.2224L43.9249 20.9109Z\"\n        fill=\"url(#paint2_radial_311_23)\"\n        fillOpacity=\"0.25\"\n      />\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M73.3122 37.5959C74.1999 38.4172 74.2327 39.7806 73.3852 40.641L50.0519 64.3333C49.6272 64.7646 49.0371 65.0059 48.422 64.9999C47.8069 64.9939 47.222 64.741 46.8063 64.3016L34.5841 51.3785C33.7548 50.5016 33.8159 49.1392 34.7206 48.3354C35.6253 47.5316 37.031 47.5908 37.8604 48.4677L48.4773 59.6934L70.1703 37.6667C71.0177 36.8062 72.4244 36.7745 73.3122 37.5959Z\"\n        fill=\"#F2F2F3\"\n      />\n      <defs>\n        <radialGradient\n          id=\"paint0_radial_311_23\"\n          cx=\"0\"\n          cy=\"0\"\n          r=\"1\"\n          gradientUnits=\"userSpaceOnUse\"\n          gradientTransform=\"translate(53 51) rotate(-46.1458) scale(70.7248 53.2019)\"\n        >\n          <stop stopColor=\"#801AB3\" stopOpacity=\"0\" />\n          <stop offset=\"1\" stopColor=\"#4C4CFF\" />\n        </radialGradient>\n        <radialGradient\n          id=\"paint1_radial_311_23\"\n          cx=\"0\"\n          cy=\"0\"\n          r=\"1\"\n          gradientUnits=\"userSpaceOnUse\"\n          gradientTransform=\"translate(53.5 51) rotate(-43.0632) scale(73.2274 55.0025)\"\n        >\n          <stop stopColor=\"#801AB3\" stopOpacity=\"0\" />\n          <stop offset=\"1\" stopColor=\"#4C4CFF\" />\n        </radialGradient>\n        <radialGradient\n          id=\"paint2_radial_311_23\"\n          cx=\"0\"\n          cy=\"0\"\n          r=\"1\"\n          gradientUnits=\"userSpaceOnUse\"\n          gradientTransform=\"translate(53 50.6667) rotate(136.146) scale(47.1499 35.4679)\"\n        >\n          <stop stopColor=\"#801AB3\" stopOpacity=\"0\" />\n          <stop offset=\"1\" stopColor=\"#4C4CFF\" stopOpacity=\"0.5\" />\n        </radialGradient>\n      </defs>\n    </svg>\n  );\n}\n\nexport default IconSuccess;\n","import React from 'react';\n\nimport classNames from 'classnames/bind';\nimport IconSuccess from '../Icons/IconSuccess';\nimport styles from './orderDetails.module.css';\ninterface IOrderDetails {\n  item: number;\n}\nfunction OrderDetails({ item }: IOrderDetails) {\n  return (\n    <div className={styles.modalContent}>\n      <div\n        className={classNames(\n          styles.modalOrderTitle,\n          ' pt-15 text text_type_digits-large mb-8'\n        )}\n      >\n        {item}\n      </div>\n      <div className=\"modalOrderContent\">\n        <div className=\"modalOrderContent-indeti text text_type_main-medium mb-15\">\n          идентификатор заказа\n        </div>\n        <div className=\"modalOrderContentIcon mb-15\">\n          <IconSuccess />\n        </div>\n        <div className=\"modalOrderContentDescription\">\n          <p className=\"text text_type_main-default mb-2\">\n            Ваш заказ начали готовить\n          </p>\n          <span\n            className={classNames(\n              styles.textDark,\n              'text text_type_main-default'\n            )}\n          >\n            Дождитесь готовности на орбитальной станции\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default OrderDetails;\n","import React from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { useTypedSelector } from '../../hooks/useTypedSelector';\nimport { useActions } from '../../hooks/useActions';\nimport Main from '../../components/Main/Main';\nimport Modal from '../../components/Modal/Modal';\nimport OrderDetails from '../../components/OrderDetails/OrderDetails';\n\nfunction App() {\n  const { closeModalAction } = useActions();\n  const { error } = useTypedSelector((store) => store.ingredientsState);\n  const { modalIsOpen, modalMode } = useTypedSelector(\n    (store) => store.modalState\n  );\n  const { orderNumber } = useTypedSelector((store) => store.orderState);\n  return (\n    <>\n      <div className=\"App\">\n        {error ? (\n          <div className=\"error-App\">\n            <p className=\"text text_type_main-large\">\n              Произошла ошибка, при получении данных\n            </p>\n          </div>\n        ) : (\n          <DndProvider backend={HTML5Backend}>\n            <Main />\n          </DndProvider>\n        )}\n      </div>\n      <Modal\n        show={modalIsOpen && modalMode === 'orderDetails'}\n        onClose={() => closeModalAction()}\n      >\n        <OrderDetails item={orderNumber} />\n      </Modal>\n    </>\n  );\n}\n\nexport default App;\n","import Cookies from 'js-cookie';\nimport { Route, Redirect, RouteProps } from 'react-router-dom';\n\nconst ProtectedRoute = ({ path, exact, children }: RouteProps) => {\n  const isAuth = Cookies.get('accessToken');\n\n  return (\n    <Route\n      path={path}\n      exact={exact}\n      render={({ location }) =>\n        isAuth ? (\n          children\n        ) : (\n          <Redirect\n            to={{\n              pathname: '/login',\n              state: {\n                from: location,\n              },\n            }}\n          />\n        )\n      }\n    />\n  );\n};\n\nexport default ProtectedRoute;\n","import React, { useState } from 'react';\nimport { useTypedSelector } from '../../hooks/useTypedSelector';\nimport Cookies from 'js-cookie';\nimport { Link, Redirect, useHistory, useLocation } from 'react-router-dom';\nimport {\n  Button,\n  Input,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport styles from '../LoginForm/styles.module.css';\nimport classNames from 'classnames';\nimport { useActions } from '../../hooks/useActions';\nfunction RegisterForm() {\n  const history = useHistory();\n  const location = useLocation();\n  const { forgotPassword } = useActions();\n  const { isAuth, isForgotPasswordRequest } = useTypedSelector(\n    (state) => state.userState\n  );\n  const [form, setValue] = useState<{ email: string }>({ email: '' });\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setValue({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const submitForm = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    await forgotPassword(form);\n    if (isForgotPasswordRequest) {\n      history.push('/reset-password', { from: location });\n    }\n  };\n\n  if (Cookies.get('accessToken')) {\n    return <Redirect to={'/profile'} />;\n  }\n\n  return (\n    <div className={styles.profileForm}>\n      <div\n        className={classNames(\n          styles.profile_form__title,\n          'mb-6 text text_type_main-medium'\n        )}\n      >\n        Восстановление пароля\n      </div>\n      <form onSubmit={submitForm}>\n        <div className={classNames(styles.profile_form__group, 'mb-6')}>\n          <Input\n            type={'email'}\n            placeholder={'Укажите e-mail'}\n            name={'email'}\n            errorText={'Ошибка'}\n            value={form.email}\n            onChange={onChange}\n          />\n        </div>\n        <div className={classNames(styles.profile_form__group, 'mb-20')}>\n          <Button type=\"primary\" size=\"medium\">\n            Восстановить\n          </Button>\n        </div>\n      </form>\n      <div className={classNames(styles.profile_form__group, 'mb-4')}>\n        <p\n          className={classNames(\n            styles.color_text,\n            'text text_type_main-default'\n          )}\n        >\n          Вспомнили пароль?\n        </p>\n        <Link to=\"/login\" className=\"color_link\">\n          Войти\n        </Link>\n      </div>\n    </div>\n  );\n}\nexport default RegisterForm;\n","import React from 'react';\nimport ForgotForm from '../../components/ForgotForm';\n\nfunction ForgotPassword() {\n  return (\n    <div className=\"container\">\n      <ForgotForm />\n    </div>\n  );\n}\nexport default ForgotPassword;\n","import React, { useState } from 'react';\nimport Cookies from 'js-cookie';\nimport {\n  Button,\n  Input,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport classNames from 'classnames';\nimport { Link, Redirect, useHistory } from 'react-router-dom';\nimport { useActions } from '../../hooks/useActions';\nimport { Location } from 'history';\nimport Loader from '../Icons/Loader';\nimport styles from './styles.module.css';\n\nfunction LoginForm() {\n  const history = useHistory<{ from: string }>();\n  const { login } = useActions();\n  const [loader, setLoader] = useState<boolean>(false);\n  const [form, setValue] = useState<{ email: string; password: string }>({\n    email: '',\n    password: '',\n  });\n\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setValue({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const submitForm = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    setLoader(true);\n    const res = await login(form);\n    setLoader(false);\n  };\n\n  if (Cookies.get('accessToken')) {\n    return <Redirect to={history?.location?.state?.from || '/'} />;\n  }\n\n  return (\n    <div className={styles.profileForm}>\n      <div\n        className={classNames(\n          styles.profile_form__title,\n          'mb-6 text text_type_main-medium'\n        )}\n      >\n        Вход\n      </div>\n      <form onSubmit={submitForm}>\n        <div className={classNames(styles.profile_form__group, 'mb-6')}>\n          <Input\n            type={'email'}\n            placeholder={'E-mail'}\n            name={'email'}\n            value={form.email}\n            errorText={'Ошибка'}\n            onChange={onChange}\n          />\n        </div>\n        <div className={classNames(styles.profile_form__group, 'mb-6')}>\n          <Input\n            type={'password'}\n            placeholder={'Пароль'}\n            name={'password'}\n            value={form.password}\n            errorText={'Ошибка'}\n            onChange={onChange}\n          />\n        </div>\n        <div className={classNames(styles.profile_form__group, 'mb-20')}>\n          <Button type=\"primary\" size=\"medium\">\n            {loader ? <Loader /> : 'Войти'}\n          </Button>\n        </div>\n      </form>\n      <div className={classNames(styles.profile_form__group, 'mb-4')}>\n        <p\n          className={classNames(\n            styles.color_text,\n            'text text_type_main-default'\n          )}\n        >\n          Вы — новый пользователь?\n        </p>\n        <Link to=\"/register\" className=\"color_link\">\n          Зарегистрироваться\n        </Link>\n      </div>\n      <div className={classNames(styles.profile_form__group, 'mb-4')}>\n        <p\n          className={classNames(\n            styles.color_text,\n            'text text_type_main-default'\n          )}\n        >\n          Забыли пароль?\n        </p>\n        <Link to=\"/forgot-password\" className=\"color_link\">\n          Восстановить пароль\n        </Link>\n      </div>\n    </div>\n  );\n}\nexport default LoginForm;\n","import React from 'react';\nimport LoginForm from '../../components/LoginForm';\nfunction Login() {\n  return (\n    <div className=\"container\">\n      <LoginForm />\n    </div>\n  );\n}\nexport default Login;\n","import React from 'react';\nimport { Link, useRouteMatch } from 'react-router-dom';\nimport classNames from 'classnames';\nimport styles from './index.module.css';\nimport { useActions } from '../../hooks/useActions';\nfunction Sidebar() {\n  const { logoutUser } = useActions();\n  const profilePage = useRouteMatch('/profile');\n  const profileOrdersPage = useRouteMatch('/profile/orders');\n  const profilePageActive = profilePage && profilePage.isExact;\n  const profileOrdersPageActive =\n    profileOrdersPage && profileOrdersPage.isExact;\n\n  const logout = () => {\n    logoutUser();\n    // if (res) {\n    // }\n  };\n\n  return (\n    <div className={classNames(styles.sidebar, 'mr-15 sidebarWrap')}>\n      <nav className={styles.nav}>\n        <ul className={styles.nav_list}>\n          <li\n            className={classNames(\n              styles.nav_item,\n              'text text_type_main-medium'\n            )}\n          >\n            <Link\n              to={{ pathname: '/profile' }}\n              className={classNames(\n                styles.nav_item,\n                'text text_type_main-medium'\n              )}\n            >\n              Профиль\n            </Link>\n          </li>\n          <li\n            className={classNames(\n              styles.nav_item,\n              'text text_type_main-medium'\n            )}\n          >\n            <Link\n              to=\"/profile/orders\"\n              className={classNames(\n                styles.nav_item,\n                'text text_type_main-medium'\n              )}\n            >\n              История заказов\n            </Link>\n          </li>\n          <li\n            className={classNames(\n              styles.nav_item,\n              'text text_type_main-medium'\n            )}\n            onClick={logout}\n          >\n            Выход\n          </li>\n        </ul>\n      </nav>\n    </div>\n  );\n}\n\nexport default Sidebar;\n","import React from 'react';\nimport { useRouteMatch } from 'react-router';\nimport cs from 'classnames';\nimport Sidebar from '../../components/Sidebar';\n\nexport interface LayoutProps {\n  children?: React.ReactNode;\n}\n\nfunction Profile({ children }: LayoutProps) {\n  const profileOrders = useRouteMatch('/profile/orders');\n  const profileOrdersActive = profileOrders && profileOrders.isExact;\n  return (\n    <div className=\"container\">\n      <div\n        className={cs(\n          'lk-wrapper profile-wrapper',\n          profileOrdersActive ? 'profile-orders' : ''\n        )}\n      >\n        <Sidebar />\n        {children}\n      </div>\n    </div>\n  );\n}\nexport default Profile;\n","import React, { useState } from 'react';\nimport Cookies from 'js-cookie';\nimport { Link, Redirect } from 'react-router-dom';\nimport {\n  Button,\n  Input,\n  PasswordInput,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport classNames from 'classnames';\nimport Loader from '../Icons/Loader';\nimport { UserActionsCreator } from '../../services/actions/user/user-actions';\nimport styles from '../LoginForm/styles.module.css';\nimport { useAppDispatch } from '../../services';\n\ndeclare module 'react' {\n  interface FunctionComponent<P = {}> {\n    (props: PropsWithChildren<P>, context?: any): ReactElement<any, any> | null;\n  }\n}\n//Для ревьюера на данной странице мне нужен диспатч, иначе с экшенов не вернется калбэк.\nfunction RegisterForm() {\n  const dispatch = useAppDispatch();\n  const [loader, setLoader] = useState<boolean>(false);\n\n  const [form, setValue] = useState<{\n    name: string;\n    email: string;\n    password: string;\n  }>({ name: '', email: '', password: '' });\n\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setValue({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const submitForm = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    setLoader(true);\n    await UserActionsCreator.register(form)(dispatch);\n\n    setLoader(false);\n  };\n\n  if (Cookies.get('accessToken')) {\n    <Redirect to={'/profile'} />;\n  }\n\n  return (\n    <div className={styles.profileForm}>\n      <div\n        className={classNames(\n          styles.profile_form__title,\n          'mb-6 text text_type_main-medium'\n        )}\n      >\n        Регистрация\n      </div>\n      <form onSubmit={submitForm}>\n        <div className={classNames(styles.profile_form__group, 'mb-6')}>\n          <Input\n            type={'text'}\n            placeholder={'Имя'}\n            name={'name'}\n            value={form.name}\n            errorText={'Ошибка'}\n            onChange={onChange}\n          />\n        </div>\n        <div className={classNames(styles.profile_form__group, 'mb-6')}>\n          <Input\n            type={'email'}\n            placeholder={'E-mail'}\n            name={'email'}\n            value={form.email}\n            errorText={'Ошибка'}\n            onChange={onChange}\n          />\n        </div>\n        <div className={classNames(styles.profile_form__group, 'mb-6')}>\n          <PasswordInput\n            name={'password'}\n            value={form.password}\n            onChange={onChange}\n          />\n        </div>\n        <div className={classNames(styles.profile_form__group, 'mb-20')}>\n          <Button type=\"primary\" size=\"medium\">\n            {loader ? <Loader /> : 'Зарегистрироваться'}\n          </Button>\n        </div>\n      </form>\n      <div className={classNames(styles.profile_form__group, 'mb-4')}>\n        <p\n          className={classNames(\n            styles.color_text,\n            'text text_type_main-default'\n          )}\n        >\n          Уже зарегистрированы?\n        </p>\n        <Link to=\"/login\" className=\"color_link\">\n          Войти\n        </Link>\n      </div>\n    </div>\n  );\n}\nexport default RegisterForm;\n","import React from 'react';\nimport RegisterForm from '../../components/RegisterForm';\n\nfunction Register() {\n  return (\n    <div className=\"container\">\n      <RegisterForm />\n    </div>\n  );\n}\nexport default Register;\n","import React, { useState } from 'react';\nimport { useTypedSelector } from '../../hooks/useTypedSelector';\nimport { Link, Redirect, useLocation, useHistory } from 'react-router-dom';\nimport Cookies from 'js-cookie';\nimport {\n  Button,\n  Input,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport styles from '../LoginForm/styles.module.css';\nimport classNames from 'classnames';\nimport { useActions } from '../../hooks/useActions';\nimport { Location } from 'history';\nfunction ResetForm() {\n  const location = useLocation<{ from: Location }>();\n  const history = useHistory();\n  const { resetPassword } = useActions();\n  const { user } = useTypedSelector((state) => state.userState);\n  const [form, setValue] = useState<{\n    password: string;\n    token: string;\n    code: string;\n  }>({ password: '', token: '', code: '' });\n\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setValue({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const submitForm = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    const token = Cookies.get('token') || '';\n    if (form.code !== '') {\n      setValue({ ...form, token });\n      const res = await resetPassword(form);\n\n      if (res && res?.success) {\n        history.push('/login');\n      } else {\n        return;\n      }\n    }\n  };\n\n  if (user) {\n    return <Redirect to={'/'} />;\n  }\n  if (\n    !location.state ||\n    (location.state && location.state.from.pathname !== '/forgot-password')\n  ) {\n    return <Redirect to={'/forgot-password'} />;\n  }\n  return (\n    <div className={styles.profileForm}>\n      <div\n        className={classNames(\n          styles.profile_form__title,\n          'mb-6 text text_type_main-medium'\n        )}\n      >\n        Восстановление пароля\n      </div>\n      <form onSubmit={submitForm}>\n        <div className={classNames(styles.profile_form__group, 'mb-6')}>\n          <Input\n            type={'password'}\n            placeholder={'Введите новый пароль'}\n            name={'passowrd'}\n            value={form.password}\n            icon={'ShowIcon'}\n            onChange={onChange}\n          />\n        </div>\n        <div className={classNames(styles.profile_form__group, 'mb-6')}>\n          <Input\n            type={'text'}\n            placeholder={'Введите код из письма'}\n            name={'code'}\n            value={form.code}\n            onChange={onChange}\n          />\n        </div>\n        <div className={classNames(styles.profile_form__group, 'mb-20')}>\n          <Button type=\"primary\" size=\"medium\">\n            Сохранить\n          </Button>\n        </div>\n      </form>\n      <div className={classNames(styles.profile_form__group, 'mb-4')}>\n        <p\n          className={classNames(\n            styles.color_text,\n            'text text_type_main-default'\n          )}\n        >\n          Вспомнили пароль?\n        </p>\n        <Link to=\"/login\" className=\"color_link\">\n          Войти\n        </Link>\n      </div>\n    </div>\n  );\n}\nexport default ResetForm;\n","import React from 'react';\nimport ResetForm from '../../components/ResetForm';\nfunction ResetPassword() {\n  return (\n    <div>\n      <ResetForm />\n    </div>\n  );\n}\nexport default ResetPassword;\n","import React from 'react';\nimport { useParams } from 'react-router-dom';\nimport classNames from 'classnames/bind';\nimport styles from '../Modal/modal.module.css';\nimport { useTypedSelector } from '../../hooks/useTypedSelector';\n\nconst IngredientDetails = () => {\n  const { id } = useParams<{ id: string }>();\n  const { modalIsOpen } = useTypedSelector((state) => state.modalState);\n  const { ingredients } = useTypedSelector((state) => state.ingredientsState);\n  const item = ingredients.find((ingredient) => ingredient._id === id);\n  return (\n    <div\n      className={classNames(\n        styles.modalContent,\n        styles.modalContentIngredient,\n        !modalIsOpen ? styles.modalContentMargin : ''\n      )}\n    >\n      <div className=\"modalHeader text text_type_main-large\">\n        Детали ингредиента\n      </div>\n      {item && (\n        <div className={styles.modalContentWrap}>\n          <div className=\"modalContentImg mb-4\">\n            <img src={item.image_large} alt=\"\" />\n          </div>\n          <div\n            className={classNames(\n              styles.modalContentTitle,\n              ' text text_type_main-medium mb-8'\n            )}\n          >\n            {item.name}\n          </div>\n          <div className={styles.modalContentItems}>\n            <div className={classNames(styles.modalContentItem, 'mr-5')}>\n              <span className=\"text text_type_main-default\">Калории,ккал</span>\n              <div className={styles.value}>{item.calories}</div>\n            </div>\n            <div className={classNames(styles.modalContentItem, 'mr-5')}>\n              <span className=\"text text_type_main-default\">Белки, г</span>\n              <div className={styles.value}>{item.proteins}</div>\n            </div>\n            <div className={classNames(styles.modalContentItem, 'mr-5')}>\n              <span className=\"text text_type_main-default\">Жиры, г</span>\n              <div className={styles.value}>{item.fat}</div>\n            </div>\n            <div className={classNames(styles.modalContentItem)}>\n              <span className=\"text text_type_main-default\">Углеводы, г</span>\n              <div className={styles.value}>{item.carbohydrates}</div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\nexport default IngredientDetails;\n","import React, { useState, useEffect } from 'react';\nimport { useTypedSelector } from '../../hooks/useTypedSelector';\nimport {\n  Button,\n  Input,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport { useActions } from '../../hooks/useActions';\nimport Loader from '../Icons/Loader';\nimport styles from './index.module.css';\nimport { UserActionsCreator } from '../../services/actions/user/user-actions';\nimport { useAppDispatch } from '../../services';\ndeclare module 'react' {\n  interface FunctionComponent<P = {}> {\n    (props: PropsWithChildren<P>, context?: any): ReactElement<any, any> | null;\n  }\n}\n//Для ревьюера на данной странице мне нужен диспатч, иначе с экшенов не вернется калбэк.\nfunction ProfileForm() {\n  const dispatch = useAppDispatch();\n  const { user } = useTypedSelector((state) => state.userState);\n  const [loader, setLoader] = useState<boolean>(false);\n  const [form, setForm] = useState<{\n    name: string;\n    email: string;\n    password: string;\n  }>({\n    name: '',\n    email: '',\n    password: '',\n  });\n  const [isFocusName, setFocusName] = useState<boolean>(false);\n  const [isFocusEmail, setFocusEmail] = useState<boolean>(false);\n  const [isFocusPassword, setFocusPassword] = useState<boolean>(false);\n\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const cancelClick = (e: React.ChangeEvent<HTMLElement>) => {\n    e.preventDefault();\n    setForm({ ...form, name: user.name, email: user.email, password: '' });\n  };\n  const fetchUse = async () => {\n    const res = await UserActionsCreator.getUserInformation()(dispatch);\n    if (res && res?.success && res?.user) {\n      setForm({ ...form, name: res.user.name, email: res.user.email });\n    }\n  };\n  const submitForm = async (e: React.ChangeEvent<HTMLElement>) => {\n    e.preventDefault();\n    setLoader(true);\n    const response = await UserActionsCreator.changeUserData(form)(dispatch);\n    if (response) {\n      setLoader(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchUse();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <div className={styles.lk_form}>\n      <form>\n        <div className=\"form_group mb-6\">\n          <Input\n            type=\"text\"\n            placeholder=\"Имя\"\n            onChange={onChange}\n            onIconClick={() => setFocusName(true)}\n            onBlur={() => setFocusName(false)}\n            icon={isFocusName ? 'CloseIcon' : 'EditIcon'}\n            disabled={!isFocusName}\n            value={form.name}\n            name=\"name\"\n            error={false}\n            errorText=\"Ошибка\"\n          />\n        </div>\n        <div className=\"form_group mb-6\">\n          <Input\n            type=\"email\"\n            placeholder=\"Email\"\n            onChange={onChange}\n            onIconClick={() => setFocusEmail(true)}\n            onBlur={() => setFocusEmail(false)}\n            icon={isFocusEmail ? 'CloseIcon' : 'EditIcon'}\n            disabled={!isFocusEmail}\n            value={form.email}\n            name=\"email\"\n            error={false}\n            errorText=\"Ошибка\"\n          />\n        </div>\n        <div className=\"form_group mb-6\">\n          <Input\n            type=\"password\"\n            placeholder=\"Пароль\"\n            onChange={onChange}\n            onIconClick={() => setFocusPassword(true)}\n            onBlur={() => setFocusPassword(false)}\n            icon={isFocusPassword ? 'CloseIcon' : 'EditIcon'}\n            disabled={!isFocusPassword}\n            value={form.password}\n            name=\"password\"\n            error={false}\n            errorText=\"Ошибка\"\n          />\n        </div>\n\n        <div className=\"form_group mb-6\">\n          <Button type=\"secondary\" size=\"medium\" onClick={() => cancelClick}>\n            Отмена\n          </Button>\n          <Button type=\"primary\" size=\"medium\" onClick={() => submitForm}>\n            Сохранить {loader ? <Loader /> : null}\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default ProfileForm;\n","import { formatRelative } from 'date-fns';\nimport { ru } from 'date-fns/locale';\n\nexport const formatDate = (date: string) => {\n  return formatRelative(new Date(date), new Date(), {\n    locale: ru,\n  });\n};\n","import React, { FC, useMemo } from 'react';\nimport { Link, useHistory, useLocation, useRouteMatch } from 'react-router-dom';\nimport cs from 'classnames';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport styles from './style.module.css';\nimport { Order } from '../../types';\nimport { useTypedSelector } from '../../hooks/useTypedSelector';\nimport { formatDate } from '../../helpers/time';\nimport { useActions } from '../../hooks/useActions';\ninterface IFeedItem {\n  order: Order;\n}\nconst FeedItem: FC<IFeedItem> = ({ order }) => {\n  const location = useLocation();\n  const history = useHistory();\n  const { openModalAction } = useActions();\n  const profileOrders = useRouteMatch('/profile/orders');\n  const profileOrdersActive = profileOrders && profileOrders.isExact;\n  const { ingredients: ingredientsState } = useTypedSelector(\n    (state) => state.ingredientsState\n  );\n\n  const findImages = (id: string): string | undefined => {\n    return ingredientsState.find((x) => x._id === id)?.image;\n  };\n  const price = useMemo((): number => {\n    let ingredientsPrice = 0;\n    if (ingredientsState === undefined) {\n      return 0;\n    }\n    order.ingredients.forEach((x) => {\n      let price: number;\n      if (ingredientsState && ingredientsState.length > 0) {\n        price = ingredientsState.find((i) => i?._id === x)!.price | 0;\n\n        if (price) {\n          ingredientsPrice += price;\n        }\n      }\n    });\n    return ingredientsPrice;\n  }, [ingredientsState]);\n\n  const checkOrder = (order: Order): boolean => {\n    return (\n      order !== undefined &&\n      order != null &&\n      Object.keys(order).length > 0 &&\n      order.ingredients !== null &&\n      order.ingredients !== undefined &&\n      order.ingredients.length > 0\n    );\n  };\n  const clickOrder = (): void => {\n    if (checkOrder(order)) {\n      openModalAction({ modalIsOpen: true, mode: 'FeedDetails' });\n      const pathname = profileOrdersActive\n        ? `/profile/orders/${order._id}`\n        : `/feed/${order._id}`;\n\n      history.push({\n        pathname,\n        state: {\n          background: location,\n        },\n      });\n    }\n  };\n\n  const getStatus = (status: string): string => {\n    let text = '';\n\n    switch (status) {\n      case 'created':\n        text = 'Создан';\n        break;\n      case 'pending':\n        text = 'Готовится';\n        break;\n      case 'done':\n        text = 'Выполнен';\n        break;\n      default:\n    }\n\n    return text;\n  };\n\n  if (!ingredientsState.length) {\n    return null;\n  }\n  return (\n    <div\n      className={cs(styles.feedItem, 'p-6 mr-2 mb-4 feedWrap')}\n      onClick={clickOrder}\n    >\n      <div className={cs(styles.feedItemTop, 'mb-6')}>\n        <div className={cs(styles.number, 'text text_type_digits-default')}>\n          {`#${order.number}`}\n        </div>\n        <div className={cs(styles.date, 'text text_color_inactive')}>\n          {formatDate(order.createdAt)}\n        </div>\n      </div>\n      <div\n        className={cs(\n          styles.feedItemName,\n          'text text_type_main-medium',\n          profileOrdersActive ? 'mb-2' : 'mb-6'\n        )}\n      >\n        {order.name}\n      </div>\n      {profileOrdersActive ? (\n        <p\n          className={`text text_type_main-default mb-6 ${styles.status} ${\n            order.status === 'done' ? styles.done : ''\n          }`}\n        >\n          {getStatus(order.status)}\n        </p>\n      ) : null}\n\n      <div className={styles.feedItemBottom}>\n        <div className={cs(styles.feedItemIngredients, 'pr-6')}>\n          {order.ingredients &&\n            order.ingredients.map((ingredient, index) =>\n              index <= 5 ? (\n                <div\n                  className={styles.feedItemIngredient}\n                  key={`feedItemIngredients_${ingredient}_${index}`}\n                >\n                  <img src={findImages(ingredient)} alt=\"\" />\n                  {order.ingredients.length > 6 && index === 5 ? (\n                    <div\n                      className={cs(\n                        styles.count,\n                        'text text_type_digits-default text_type_main-medium'\n                      )}\n                    >\n                      +{order.ingredients.length - 6}\n                    </div>\n                  ) : null}\n                </div>\n              ) : null\n            )}\n        </div>\n        <div className={styles.feedItemPrice}>\n          {ingredientsState ? (\n            <span className=\"text text_type_main-medium\">{price}</span>\n          ) : null}\n          <CurrencyIcon type=\"primary\" />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default FeedItem;\n","import React, { FC, useMemo } from 'react';\nimport cs from 'classnames';\nimport styles from './style.module.css';\nimport { Order } from '../../types';\ninterface IFeedTotal {\n  orders: Order[];\n  total: number;\n  totalToday: number;\n}\nexport const FeedTotal: FC<IFeedTotal> = ({ orders, total, totalToday }) => {\n  const findDoneArray: Array<Order[]> | undefined = useMemo(() => {\n    const doneArray = orders.filter((x) => x.status === 'done') || [];\n    if (doneArray.length) {\n      const arr = doneArray.slice(-20);\n      return arr.reduce(\n        (p: Array<Order[]>, c: Order) => {\n          if (p[p.length - 1].length === 10) {\n            p.push([]);\n          }\n\n          p[p.length - 1].push(c);\n          return p;\n        },\n        [[]]\n      );\n    }\n  }, [orders]);\n  const findNotDoneArray: Array<Order[]> | undefined = useMemo(() => {\n    const doneArray = orders.filter((x) => x.status !== 'done') || [];\n    if (doneArray.length) {\n      return doneArray.reduce(\n        (p: Array<Order[]>, c: Order) => {\n          if (p[p.length - 1].length === 5) {\n            p.push([]);\n          }\n\n          p[p.length - 1].push(c);\n          return p;\n        },\n        [[]]\n      );\n    }\n  }, [orders]);\n  return (\n    <div className={styles.feedTotal}>\n      <div className={cs(styles.feedTotalTop)}>\n        <div className={cs(styles.feedTotalTopLeft, 'mr-9')}>\n          <div className={styles.feedTotalItem}>\n            {findDoneArray &&\n              findDoneArray.map((x, idx) => (\n                <div\n                  className={cs(styles.feedTotalItemW, 'mb-15')}\n                  key={`index_${idx}`}\n                >\n                  <div className={cs(styles.title, 'mb-6')}>Готовы:</div>\n                  <div className={styles.items}>\n                    {x &&\n                      x.map((item, index) => (\n                        <span\n                          className=\"text text_type_digits-default\"\n                          key={`index_text${index}`}\n                        >\n                          {item?.number}\n                        </span>\n                      ))}\n                  </div>\n                </div>\n              ))}\n          </div>\n        </div>\n        <div className={styles.feedTotalTopRight}>\n          <div className={styles.feedTotalItem}>\n            {findNotDoneArray &&\n              findNotDoneArray.map((x, idx) => (\n                <div\n                  className={cs(styles.feedTotalItemW, 'mb-15')}\n                  key={`index_${idx}_not`}\n                >\n                  <div className={cs(styles.title, 'mb-6')}>В работе:</div>\n                  <div className={styles.items}>\n                    {x &&\n                      x.map((item, index) => (\n                        <span\n                          className=\"text text_type_digits-default\"\n                          key={`index_text${index}_not_done`}\n                        >\n                          {item?.number}\n                        </span>\n                      ))}\n                  </div>\n                </div>\n              ))}\n          </div>\n        </div>\n      </div>\n      <div className={cs(styles.feedTotalBlock, 'mb-6')}>\n        <div\n          className={cs(styles.feedTotalTitle, 'text text_type_main-medium')}\n        >\n          Выполнено за все время:\n        </div>\n        <div\n          className={cs(styles.feedTotalNumber, 'text text_type_digits-large')}\n        >\n          {total}\n        </div>\n      </div>\n      <div className={cs(styles.feedTotalBlock, 'mb-6')}>\n        <div\n          className={cs(styles.feedTotalTitle, 'text text_type_main-medium')}\n        >\n          Выполнено за сегодня:\n        </div>\n        <div\n          className={cs(styles.feedTotalNumber, 'text text_type_digits-large')}\n        >\n          {totalToday}\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { useEffect } from 'react';\nimport cs from 'classnames';\nimport { useTypedSelector } from '../../hooks/useTypedSelector';\nimport styles from './style.module.css';\nimport FeedItem from '../FeedItem';\nimport { FeedTotal } from '../FeedTotal';\nimport { useActions } from '../../hooks/useActions';\n\nconst FeedPages = () => {\n  const { wsConnectionStart, wsConnectionStop } = useActions();\n  const { orders, total, totalToday } = useTypedSelector(\n    (store) => store.feedState\n  );\n  useEffect(() => {\n    wsConnectionStart('wss://norma.nomoreparties.space/orders/all');\n  }, []);\n\n  useEffect(() => {\n    return () => {\n      wsConnectionStop();\n    };\n  }, []);\n\n  if (!orders.length) {\n    return <div className={styles.feedLoader}>Загрузка...</div>;\n  }\n  return (\n    <div className=\"container\">\n      <h1 className=\"text text_type_main-large mt-10 mb-5 title\">\n        Лента заказов\n      </h1>\n      <div className=\"row\">\n        <div className={cs(styles.feedItemsWrap, 'customScroll')}>\n          {orders &&\n            orders.map((order, idx) => (\n              <FeedItem key={`${order._id}_${idx}`} order={order} />\n            ))}\n        </div>\n        <FeedTotal orders={orders} total={total} totalToday={totalToday} />\n      </div>\n    </div>\n  );\n};\n\nexport default FeedPages;\n","import React from 'react';\nimport { Redirect, Route, Switch, useRouteMatch } from 'react-router-dom';\nimport FeedPages from '../../components/FeedPages';\n\nconst FeedPage = () => {\n  const { path } = useRouteMatch();\n\n  return (\n    <Switch>\n      <Route exact path={`${path}`}>\n        <FeedPages />\n      </Route>\n      <Route path={`${path}/:id`}>{/* <OrderDetails /> */}</Route>\n      <Route>\n        <Redirect to={path} />\n      </Route>\n    </Switch>\n  );\n};\n\nexport default FeedPage;\n","import React, { useMemo, useEffect } from 'react';\nimport { useParams, useRouteMatch } from 'react-router-dom';\nimport classNames from 'classnames/bind';\nimport styles from '../Modal/modal.module.css';\nimport { useTypedSelector } from '../../hooks/useTypedSelector';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { formatDate } from '../../helpers/time';\nimport { ingredientType, Order } from '../../types';\nimport { useActions } from '../../hooks/useActions';\nimport Cookies from 'js-cookie';\n\nexport const FeedDetails = () => {\n  const { wsConnectionStart, wsConnectionStop } = useActions();\n  const { id } = useParams<{ id: string }>();\n  const profileOrders = useRouteMatch('/profile/orders/:id');\n  const profileOrdersActive = profileOrders && profileOrders.isExact;\n  const { modalIsOpen } = useTypedSelector((state) => state.modalState);\n  const { orders, wsConnected } = useTypedSelector((store) => store.feedState);\n  const { ingredients } = useTypedSelector((state) => state.ingredientsState);\n  const order = useMemo(() => {\n    if (orders.length) {\n      return orders.find((order) => order._id === id);\n    }\n  }, [orders]);\n  const findI = useMemo(() => {\n    if (order) {\n      const ingredientsArray: ingredientType[] = [];\n      const arr = order.ingredients?.map((id: string) =>\n        ingredients.find((ingredient) => ingredient._id === id)\n      );\n      arr.forEach((x) => {\n        const find: boolean = ingredientsArray.some(\n          (ing) => ing._id === x!._id\n        );\n        if (find) {\n          const findElement = ingredientsArray.find(\n            (ing) => ing._id === x!._id\n          );\n          if (findElement) {\n            if (findElement.type === 'bun' && findElement.__v < 2) {\n              findElement.__v = findElement.__v + 1;\n            }\n          }\n          return;\n        } else {\n          if (x) {\n            // x.__v = x.__v + 1;\n            if (x.__v === 0) {\n              x.__v = x.__v + 1;\n            }\n            ingredientsArray.push(x);\n          }\n        }\n      });\n\n      return ingredientsArray;\n    }\n  }, [orders, order, ingredients]);\n\n  const orderTotalPrice = useMemo(() => {\n    if (findI && findI.length) {\n      return findI.reduce((a, b) => {\n        if (b.__v !== 0) {\n          return a + b!.price * b!.__v;\n        } else {\n          return a + b!.price;\n        }\n      }, 0);\n    }\n  }, [findI, ingredients, wsConnected]);\n\n  const getStatus = (status: string): string => {\n    let text = '';\n\n    switch (status) {\n      case 'created':\n        text = 'Создан';\n        break;\n      case 'pending':\n        text = 'Готовится';\n        break;\n      case 'done':\n        text = 'Выполнен';\n        break;\n      default:\n    }\n\n    return text;\n  };\n\n  useEffect(() => {\n    if (!wsConnected && profileOrdersActive) {\n      const token = Cookies.get('accessToken')?.split('Bearer ')[1];\n      const url = `wss://norma.nomoreparties.space/orders?token=${token}`;\n      wsConnectionStart(url);\n    }\n    if (!wsConnected && !profileOrdersActive) {\n      wsConnectionStart('wss://norma.nomoreparties.space/orders/all');\n    }\n  }, []);\n  useEffect(() => {\n    return () => {\n      wsConnectionStop();\n      // dispatch({ type: WS_CONNECTION_START });\n    };\n  }, []);\n\n  if (!order) {\n    return <div className=\"\">Загрузка...</div>;\n  }\n  return (\n    <div\n      className={classNames(\n        styles.modalContent,\n        styles.modalContentIngredient,\n        !modalIsOpen ? styles.modalContentMargin : '',\n        styles.modalFeed\n      )}\n    >\n      <div className=\"modalHeader text text_type_digits-default mb-10\">\n        #{order.number}\n      </div>\n      <div className={styles.feed_modal_wrapper}>\n        <h2 className=\"text text_type_main-medium mb-3\">{order?.name}</h2>\n        <p\n          className={`text text_type_main-default mb-15 ${styles.status} ${\n            order.status === 'done' ? styles.done : ''\n          }`}\n        >\n          {getStatus(order.status)}\n        </p>\n        <h2 className=\"text text_type_main-medium mb-6 \">Состав:</h2>\n        <div\n          className={classNames(\n            styles.ingredients_list,\n            'mb-10 pr-6 customScroll'\n          )}\n        >\n          {findI &&\n            findI?.map((ingredient, idx) => (\n              <div\n                className={classNames(styles.ingredientListItem, 'mb-4')}\n                key={`ingredientListItem${idx}_${ingredient?._id}`}\n              >\n                <div className={classNames(styles.feedItemIngredient, 'mr-4')}>\n                  <img src={ingredient?.image} alt=\"\" />\n                </div>\n                <div className=\"text text_type_main-default\">\n                  {ingredient?.name}\n                </div>\n                <div\n                  className={classNames(styles.ingredientListItemCost, 'ml-4')}\n                >\n                  <p className=\"text text_type_digits-default\">{`${ingredient?.__v}x${ingredient?.price}`}</p>\n                  <CurrencyIcon type=\"primary\" />\n                </div>\n              </div>\n            ))}\n        </div>\n        <div className={styles.ingredients_footer}>\n          <p className=\"text text_type_main-default text_color_inactive\">\n            {formatDate(order.createdAt)}\n          </p>\n          <div className={styles.ingredient_cost}>\n            <p className=\"text text_type_digits-default\">{orderTotalPrice}</p>\n            <CurrencyIcon type=\"primary\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import Cookies from 'js-cookie';\nimport React, { useEffect } from 'react';\nimport { useActions } from '../../hooks/useActions';\nimport { useTypedSelector } from '../../hooks/useTypedSelector';\nimport FeedItem from '../FeedItem';\nexport const ProfileOrder = () => {\n  const { wsConnectionStart, wsConnectionStop } = useActions();\n  const { orders } = useTypedSelector((store) => store.feedState);\n  useEffect(() => {\n    const token = Cookies.get('accessToken')?.split('Bearer ')[1];\n    const url = `wss://norma.nomoreparties.space/orders?token=${token}`;\n    wsConnectionStart(url);\n  }, []);\n  useEffect(() => {\n    return () => {\n      wsConnectionStop();\n    };\n  }, []);\n\n  if (!orders.length) {\n    return <div className=\"\">Загрузка...</div>;\n  }\n\n  return (\n    <div className=\"profileOrders pr-2 customScroll\">\n      {orders &&\n        orders.map((order, idx) => (\n          <FeedItem key={`${order._id}_${idx}`} order={order} />\n        ))}\n    </div>\n  );\n};\n","import React from 'react';\nimport {\n  Route,\n  Switch,\n  useHistory,\n  useLocation,\n  useRouteMatch,\n} from 'react-router-dom';\nimport { useActions } from '../../hooks/useActions';\nimport HomePage from '../../pages/HomePage';\nimport ProtectedRoute from '../ProtectedRoute';\nimport ForgotPassword from '../../pages/ForgotPassword';\nimport Login from '../../pages/Login';\nimport Profile from '../../pages/Profile';\nimport Register from '../../pages/Register';\nimport ResetPassword from '../../pages/ResetPassword';\nimport IngredientsDetails from '../IngredientDetails/IngredientDetails';\nimport ProfileForm from '../ProfileForm';\nimport Modal from '../Modal/Modal';\nimport FeedPage from '../../pages/Feed';\nimport { FeedDetails } from '../FeedDetails';\nimport { ProfileOrder } from '../ProfileOrder';\n\nfunction AppMain() {\n  const location = useLocation();\n  const history = useHistory();\n  const profileOrders = useRouteMatch('/profile/orders');\n  const profileOrdersActive = profileOrders && profileOrders.isExact;\n  const { closeModalAction } = useActions();\n  const { state: locationState } = useLocation() as {\n    state: { background?: typeof location } | null;\n  };\n\n  let { background } = locationState ?? {};\n\n  if (history.action !== 'PUSH') {\n    background = undefined;\n  }\n\n  const closeModalIgredient = () => {\n    closeModalAction();\n    history.push('/');\n  };\n  const closeModalFeed = () => {\n    closeModalAction();\n\n    history.push('/feed');\n  };\n  const closeModalFeedProfile = () => {\n    closeModalAction();\n    history.push('/profile/orders');\n  };\n  return (\n    <main>\n      <Switch location={background || location}>\n        <Route exact path=\"/\">\n          <HomePage />\n        </Route>\n        <Route exact path=\"/login\">\n          <Login />\n        </Route>\n        <Route exact path=\"/register\">\n          <Register />\n        </Route>\n        <Route exact path=\"/forgot-password\">\n          <ForgotPassword />\n        </Route>\n        <Route exact path=\"/reset-password\">\n          <ResetPassword />\n        </Route>\n        <ProtectedRoute exact path=\"/profile\">\n          <Profile>\n            <ProfileForm />\n          </Profile>\n        </ProtectedRoute>\n        <ProtectedRoute exact path=\"/profile/orders\">\n          <Profile>\n            <ProfileOrder />\n          </Profile>\n        </ProtectedRoute>\n        <Route exact path=\"/ingredients/:id\">\n          <IngredientsDetails />\n        </Route>\n        <Route exact path=\"/logout\">\n          <Profile />\n        </Route>\n        <Route exact path=\"/feed\">\n          <FeedPage />\n        </Route>\n        <Route exact path=\"/feed/:id\">\n          <FeedDetails />\n        </Route>\n        <Route exact path=\"/profile/orders/:id\">\n          <FeedDetails />\n        </Route>\n      </Switch>\n      {background && (\n        <>\n          <Route path={'/ingredients/:id'}>\n            <Modal show={true} onClose={() => closeModalIgredient()}>\n              <IngredientsDetails />\n            </Modal>\n          </Route>\n          <Route exact path=\"/feed/:id\">\n            <Modal show={true} onClose={() => closeModalFeed()}>\n              <FeedDetails />\n            </Modal>\n          </Route>\n          <Route exact path=\"/profile/orders/:id\">\n            <Modal show={true} onClose={() => closeModalFeedProfile()}>\n              <FeedDetails />\n            </Modal>\n          </Route>\n        </>\n      )}\n    </main>\n  );\n}\nexport default AppMain;\n","import React, { useEffect, useCallback } from 'react';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { useActions } from '../../hooks/useActions';\nimport AppHeader from '../AppHeader/AppHeader';\nimport AppMain from '../AppMain/AppMain';\nimport { useTypedSelector } from '../../hooks/useTypedSelector';\nimport Cookies from 'js-cookie';\nfunction App() {\n  const { getIngredients, setUserAuth } = useActions();\n  const { error } = useTypedSelector((store) => store.ingredientsState);\n  const fetchData = useCallback(async () => {\n    await getIngredients();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(() => {\n    fetchData();\n    //react-hooks/exhaustive-deps\n    if (Cookies.get('accessToken')) {\n      setUserAuth(true);\n    }\n  }, [fetchData]);\n\n  return (\n    <div>\n      <Router>\n        <AppHeader />\n        {!error && <AppMain />}\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { store } from \"./services/\";\nimport \"./styles/index.css\";\nimport App from \"./components/App/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"feedItem\":\"style_feedItem__3WUW2\",\"feedItemTop\":\"style_feedItemTop__2f7gW\",\"number\":\"style_number__3i54k\",\"date\":\"style_date__225cw\",\"feedItemName\":\"style_feedItemName__3jb_O\",\"feedItemBottom\":\"style_feedItemBottom__2ug0h\",\"feedItemIngredients\":\"style_feedItemIngredients__2gQut\",\"feedItemIngredient\":\"style_feedItemIngredient__2LeIh\",\"feedItemPrice\":\"style_feedItemPrice__zPw9z\",\"count\":\"style_count__2w_qr\",\"status\":\"style_status__3TRPG\",\"done\":\"style_done__3E3HB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerCards\":\"BurgerConstructor_burgerCards__120hJ\",\"BurgerConstructorsWrapper\":\"BurgerConstructor_BurgerConstructorsWrapper__1PTJ9\",\"burgerWrapper\":\"BurgerConstructor_burgerWrapper__2DIgN\",\"burgerCard\":\"BurgerConstructor_burgerCard__2uPAW\",\"constructor-element\":\"BurgerConstructor_constructor-element__2712R\",\"burderCardIcon\":\"BurgerConstructor_burderCardIcon__3NDPa\",\"burgerTotalPrice\":\"BurgerConstructor_burgerTotalPrice__14jsX\",\"price\":\"BurgerConstructor_price__1jkrb\",\"button_wrapper\":\"BurgerConstructor_button_wrapper__-obqV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar\":\"Sidebar_sidebar__1wYcA\",\"nav\":\"Sidebar_nav__2MKUB\",\"nav_list\":\"Sidebar_nav_list__2FHHY\",\"nav_item\":\"Sidebar_nav_item__3hDkr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AppHeader_header__X9aJA\",\"headerWrap\":\"AppHeader_headerWrap__-eeZl\",\"headerLogo\":\"AppHeader_headerLogo__3U_fV\",\"headerMenuList\":\"AppHeader_headerMenuList__2z4Mz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerItem\":\"BurgerIngredient_burgerItem__1OQv1\",\"burderItemPrice\":\"BurgerIngredient_burderItemPrice__2-XP5\",\"burgerItemlink\":\"BurgerIngredient_burgerItemlink__Gx9Ec\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalContent\":\"orderDetails_modalContent__BQkpV\",\"modalOrderTitle\":\"orderDetails_modalOrderTitle__3IspM\",\"textDark\":\"orderDetails_textDark__3oM3d\",\"appButton\":\"orderDetails_appButton__1THRY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"headerMenuItem\":\"AppMenuItem_headerMenuItem__SWzj1\",\"headerMenuItemIcon\":\"AppMenuItem_headerMenuItemIcon__35SfN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"feedItemsWrap\":\"style_feedItemsWrap__3HjvH\"};"],"sourceRoot":""}